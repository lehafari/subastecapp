"use strict";(self.webpackChunkcliente=self.webpackChunkcliente||[]).push([[61],{49677:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(43504),a=n(56355),i=n(80184),s=function(e){var t=e.breadCrumb,n=void 0===t?[]:t;return n.length?(0,i.jsxs)("ul",{className:"app-breadcrumb breadcrumb",children:[(0,i.jsx)("li",{className:"breadcrumb-item",children:(0,i.jsx)(r.rU,{to:"/home",className:"breadcrumb-item",children:(0,i.jsx)(a.xng,{})})}),n.map((function(e){var t=e.link,n=e.titulo;return(0,i.jsx)("li",{className:"breadcrumb-item",children:t?(0,i.jsx)(r.rU,{to:t,children:n}):n},n)}))]}):null},o=function(e){var t=e.btnBackUrl,n=e.btnBackText,s=e.titulo,o=e.descripcion,l=e.Icon;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("h1",{children:[t&&(0,i.jsxs)(r.rU,{to:"/admin"+t,className:"btn btn-dark shadow-0",children:[(0,i.jsx)(a.bUI,{size:10})," ",n]}),(0,i.jsx)(l,{className:"mx-2",color:"#1f439a",style:{verticalAlign:"middle"}}),s]}),o&&(0,i.jsx)("p",{className:"mt-2",children:o})]})},l=(n(72791),function(e){var t=e.btnBackUrl,n=e.btnBackText,r=e.titulo,a=e.Icon,l=e.descripcion,c=e.breadCrumb,u=e.showTitle,d=void 0===u||u;return(0,i.jsxs)("div",{className:"app-content",children:[d?(0,i.jsxs)("div",{className:"app-title",children:[(0,i.jsx)(o,{btnBackUrl:t,btnBackText:n,titulo:r,descripcion:l,Icon:a}),(0,i.jsx)(s,{breadCrumb:c})]}):null,e.children]})})},57061:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var r=n(70885),a=n(72791),i=n(1413),s=n(56355),o=n(98048),l=n(74165),c=n(15861),u=n(10300),d=n(21213),m=n(9085),p=n(85827),f=n.n(p),x=n(13293),b=n(15597),v=n(60153),h=n(80184),g=function(){var e=(0,v.E)(),t=e.usuario,n=e.usuarioAutenticado,r=(0,x.U)().setLoader,s=(0,u.Z)({action:"single",labelText:"Arrastra y suelta o haz click para cambiar tu foto de perfil",onUpload:function(e){new(f())(e,{quality:.8,maxWidth:500,success:function(e){return(0,c.Z)((0,l.Z)().mark((function t(){var a,s,o,c,u;return(0,l.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r(!0,"Subiendo foto de Perfil"),(a=new FormData).append("file",e,e.name),"/perfil/changeFotoPerfil",t.next=7,d.Z.put("/perfil/changeFotoPerfil",a,{headers:{"content-type":"multipart/form-data"}});case 7:s=t.sent,o=JSON.parse(localStorage.getItem("persona")),(c=o)&&(u=(0,i.Z)((0,i.Z)({},c),{},{image_profile:s.data.image_profile}),localStorage.setItem("persona",JSON.stringify(u))),e.id=1,e.preview=b.PF+s.data.image_profile,p([e]),m.Am.success(s.data.msg),n(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),(0,b.S3)(t.t0);case 21:return t.prev=21,r(!1),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[0,18,21,24]])})))()},error:function(e){console.log(e)}})},onDeleteFile:function(){return g.apply(this,arguments)}}),o=s.DropzoneContenedor,p=s.setFiles;function g(){return(g=(0,c.Z)((0,l.Z)().mark((function e(){var t,a,s,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0,"Eliminando foto de perfil..."),e.next=4,d.Z.delete("/perfil/BorrarFotoPerfil");case 4:if(t=e.sent,m.Am.success(t.data.msg),a=JSON.parse(localStorage.getItem("persona")),s=a)try{o=(0,i.Z)((0,i.Z)({},s),{},{image_profile:""}),localStorage.setItem("persona",JSON.stringify(o))}catch(l){}n(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,b.S3)(e.t0);case 15:return e.prev=15,r(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})))).apply(this,arguments)}return(0,a.useEffect)((function(){t.image_profile&&p([{preview:b.PF+t.image_profile,id:1}])}),[]),(0,h.jsx)("div",{className:"form-group mt-3",children:o})},j=function(e){var t=e.itemActual,n=e.Icon,r=e.content,i=(0,a.useContext)(o.Z).usuario;return(0,h.jsx)("div",{className:"tab-pane active",id:"user-timeline",children:(0,h.jsxs)("div",{className:"timeline-post",children:[(0,h.jsx)("h4",{className:"mb-3 text-center",children:(0,h.jsxs)(h.Fragment,{children:[t," ",(0,h.jsx)(n,{})]})}),Object.keys(i).length&&r]})})},Z=n(92506),w=n(91159),k=n(73054),I=function(){var e=(0,a.useContext)(o.Z),t=e.usuarioAutenticado,n=e.usuario,r={nombres:n.nombres,apellidos:n.apellidos,email_user:n.email_user,username:n.username,telefono:n.telefono};function s(){return(s=(0,c.Z)((0,l.Z)().mark((function e(n){var r,a,s,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.put("perfil/putPerfil",n);case 3:r=e.sent,a=JSON.parse(localStorage.getItem("persona")),(s=a)&&(o=(0,i.Z)((0,i.Z)({},s),{},{apellidos:n.apellidos,email_user:n.email_user.trim().toLocaleLowerCase(),nombres:n.nombres}),localStorage.setItem("persona",JSON.stringify(o))),m.Am.success(r.data.msg),t(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,b.S3)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return(0,h.jsx)(Z.J9,{initialValues:r,onSubmit:function(e){return s.apply(this,arguments)},validate:w.Z,children:(0,h.jsxs)(Z.l0,{children:[(0,h.jsx)(k.II,{label:"Nombre de Usuario",name:"username",placeholder:"Ingresa su nombre de usuario",required:!0}),(0,h.jsx)(k.II,{label:"Nombres",name:"nombres",placeholder:"Ingrese su Nombre",required:!0}),(0,h.jsx)(k.II,{label:"Apellidos",name:"apellidos",placeholder:"Ingrese su Apellido",required:!0}),(0,h.jsx)(k.II,{label:"Correo",name:"email_user",placeholder:"Ingrese su correo",required:!0}),(0,h.jsx)(k.II,{label:"Tel\xe9fono",name:"telefono",placeholder:"Ingrese su telefono"}),(0,h.jsx)(k.zx,{text:"Actualizar Perfil"})]})})},N=n(12207),C=function(){function e(){return(e=(0,c.Z)((0,l.Z)().mark((function e(t,n){var r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/perfil/changePasswordPerfil",e.next=4,d.Z.put("/perfil/changePasswordPerfil",t);case 4:r=e.sent,m.Am.success(r.data.msg),n.resetForm(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,b.S3)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return(0,h.jsx)(Z.J9,{onSubmit:function(t,n){return e.apply(this,arguments)},validate:N.Z,initialValues:{password:"",passwordConfirm:""},children:(0,h.jsxs)(Z.l0,{children:[(0,h.jsx)(k.II,{label:"Contrase\xf1a",type:"password",name:"password",placeholder:"Ingrese su nueva contrase\xf1a",required:!0}),(0,h.jsx)(k.II,{label:"Confirmar Contrase\xf1a",type:"password",name:"passwordConfirm",placeholder:"Confirme su nueva contrase\xf1a",required:!0}),(0,h.jsx)(k.zx,{text:"Cambiar Contrase\xf1a"})]})})},A=function(){var e=(0,v.E)().cerrarSesion;function t(){return(t=(0,c.Z)((0,l.Z)().mark((function t(){return(0,l.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,b.mJ)({title:"\xbfEst\xe1s seguro de eliminar tu cuenta?",text:"No ser\xe1s capz de recuperarla!",urlDelete:"/perfil/eliminarCuenta",callback:function(){localStorage.removeItem("persona"),e()}});case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,h.jsx)("button",{className:"btn btn-danger btn-block",onClick:function(){return t.apply(this,arguments)},children:"Borrar cuenta"})},y=function(e){var t=e.itemActual,n=(0,a.useContext)(o.Z),r=n.usuario,l=(n.usuarioAutenticado,n.cerrarSesion,[{Icon:s.m3W,itemActual:"Cambiar Foto de Perfil",content:(0,h.jsx)(g,{}),validation:!0},{Icon:s.m3W,itemActual:"Datos Personales",content:(0,h.jsx)(I,{}),validation:!0},{Icon:s.kUi,itemActual:"Cambiar Contrase\xf1a",content:(0,h.jsx)(C,{}),validation:!0},{Icon:s.Xm5,itemActual:"Eliminar Cuenta",content:(0,h.jsx)(A,{}),validation:r.iduser!==b.xC}]);return(0,h.jsx)("div",{className:"tab-content",children:l.map((function(e){return e.itemActual===t&&e.validation&&(0,a.createElement)(j,(0,i.Z)((0,i.Z)({},e),{},{key:e.itemActual}))}))})},S=n(87087),P=n(55597),D=function(){var e,t=(0,v.E)().usuario;return(0,h.jsxs)("div",{className:"profile",children:[(0,h.jsxs)("div",{className:"info",children:[(0,h.jsx)(S.LazyLoadImage,{className:"user-img rounded-circle",src:(0,b.Mt)(t),alt:"Foto Perfil",effect:"blur"}),(0,h.jsxs)("h4",{children:[t.nombres," ",t.apellidos]}),(0,h.jsx)("p",{children:t.iduser===b.xC?"Super Administrador":null===(e=t.rol)||void 0===e?void 0:e.nombrerol})]}),(0,h.jsx)("div",{className:"cover-image",style:{backgroundImage:"url(".concat(P,")")}})]})},U=function(e){return(0,h.jsx)("li",{onClick:e.handleClick,style:{cursor:"pointer"},className:"nav-link".concat(e.itemActual===e.title?" active":""),children:(0,h.jsx)("span",{className:"nav-link",children:e.title})})},E=function(e){var t=e.itemActual,n=e.setItemActual,r=[{titulo:"Cambiar Foto de Perfil",validation:!0},{titulo:"Datos Personales",validation:!0},{titulo:"Cambiar Contrase\xf1a",validation:!0},{titulo:"Eliminar Cuenta",validation:(0,a.useContext)(o.Z).usuario.iduser!==b.xC}];return(0,h.jsx)("div",{className:"tile p-0",children:(0,h.jsx)("ul",{className:"nav flex-column nav-tabs user-tabs",children:r.map((function(e,r){var a=e.validation,i=e.titulo;return a?(0,h.jsx)(U,{itemActual:t,handleClick:function(){return n(i)},title:i},r):null}))})})},F=n(49677),_=function(){var e=(0,a.useState)("Datos Personales"),t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,h.jsx)(F.Z,{showTitle:!1,children:(0,h.jsxs)("div",{className:"row user",children:[(0,h.jsx)("div",{className:"col-md-12",children:(0,h.jsx)(D,{})}),(0,h.jsx)("div",{className:"col-lg-3",children:(0,h.jsx)(E,{itemActual:n,setItemActual:i})}),(0,h.jsx)("div",{className:"col-lg-9",children:(0,h.jsx)(y,{itemActual:n})})]})})}},12207:function(e,t){t.Z=function(e){var t={};return""===e.password.trim()?t.password="La contrase\xf1a es obligatoria":(e.password.trim()!==e.passwordConfirm.trim()&&(t.password="Las contrase\xf1as no son iguales"),e.password.trim().length<6&&(t.password="La contrase\xf1a debe ser de al menos 6 caracteres")),t}},91159:function(e,t){t.Z=function(e){var t,n={};return""===e.username.trim()&&(n.username="El Nombre de usuario es obligatorio"),""===e.nombres.trim()&&(n.nombres="El Nombre es obligatorio"),""===e.apellidos.trim()&&(n.apellidos="El Apellido es obligatorio"),""===e.email_user.trim()?n.email_user="El Correo es Obligatorio":/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email_user.trim())||(n.email_user="Email no v\xe1lido"),""===(null===(t=e.password)||void 0===t?void 0:t.trim())&&(n.password="La contrase\xf1a no puede ir vac\xeda"),n}},10300:function(e,t,n){var r,a,i,s,o=n(30168),l=n(1413),c=n(74165),u=n(15861),d=n(70885),m=n(42982),p=n(72791),f=n(9085),x=n(65532),b=n(63463),v=n(56355),h=n(15597),g=n(80184),j=b.ZP.div(r||(r=(0,o.Z)(["\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tpadding: 50px;\n\tborder-width: 2px;\n\tborder-radius: 3px;\n\tborder-color: ",";\n\tborder-style: ",";\n\tbackground-color: #fafafa;\n\toutline: none;\n\tcursor: pointer;\n\ttransition: border 0.24s ease-in-out;\n\tp {\n\t\tcolor: #000;\n\t\tfont-weight: 600;\n\t\tuser-select: none;\n\t\ttext-align: center;\n\t}\n"])),(function(e){return Z(e)}),(function(e){return e.isDragActive?"solid":"dashed"})),Z=function(e){return e.isDragAccept?"#00e676":e.isDragReject?"#ff1744":e.isFocused||e.isDragActive?"#2196f3":"#2b2b2b"},w=b.ZP.aside(a||(a=(0,o.Z)(["\n\tdisplay: 'flex';\n\tflex-direction: 'column';\n\tflex-wrap: 'wrap';\n\tmargin-top: 16px;\n"]))),k=b.ZP.div(i||(i=(0,o.Z)(["\n\tposition: relative;\n\tdisplay: inline-block;\n\tvertical-align: top;\n\tmargin: 16px;\n\tmin-height: 100px;\n\n\tbutton {\n\t\tdisplay: none;\n\t}\n\n\t&:hover button {\n\t\tdisplay: inline;\n\t\tposition: absolute;\n\t\tbottom: -10px;\n\t\tbox-shadow: none !important;\n\t\tleft: 25px;\n\t}\n"]))),I=b.ZP.div(s||(s=(0,o.Z)(["\n\toverflow: hidden;\n\twidth: 120px;\n\theight: 120px;\n\tposition: relative;\n\tdisplay: block;\n\tborder-radius: 10px;\n\tbackground: #999;\n\tbackground: linear-gradient(to bottom, #eee, #ddd);\n\t&:hover {\n\t\t-webkit-filter: blur(2.5px);\n\t\tfilter: blur(2.5px);\n\t}\n\n\timg {\n\t\tobject-fit: cover;\n\t\tdisplay: block;\n\t\theight: 100%;\n\t\tmax-width: 100%;\n\t}\n\n\tsvg {\n\t}\n"])));t.Z=function(e){var t=e.accept,n=void 0===t?{"image/*":[]}:t,r=e.action,a=void 0===r?"multiple":r,i=e.labelText,s=void 0===i?"Arrastra y suelta los archivos aqui para subir":i,o=e.iconPreview,b=e.limit,Z=void 0===b?10:b,N=e.onUpload,C=e.onDeleteFile,A=e.canDelete,y=void 0===A||A,S=(0,p.useState)([]),P=(0,d.Z)(S,2),D=P[0],U=P[1],E=(0,x.uI)({accept:n,onDrop:function(e){var t=e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}));"multiple"===a&&([].concat((0,m.Z)(D),(0,m.Z)(t)).length<=Z?(U([].concat((0,m.Z)(D),(0,m.Z)(t))),N&&N(t)):f.Am.error("Has excedido la cantidad de im\xe1gnes permitidas que son ".concat(Z)));"single"===a&&(U(t),N&&N(t[0]))},multiple:"multiple"===a}),F=E.getRootProps,_=E.getInputProps,L=E.isDragActive,O=D.map((function(e,t){return(0,g.jsxs)(k,{children:[(0,g.jsx)(I,{children:o?(0,g.jsx)("div",{className:"d-flex justify-content-center align-items-center h-100",children:o}):(0,g.jsx)("img",{src:e.preview,alt:"preview"})}),y&&(0,g.jsx)("button",{type:"button",onClick:(0,u.Z)((0,c.Z)().mark((function n(){var r,a,i;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:delete D[t],(r=D.filter((function(e){return null!==e}))).sort(),a=0;case 4:if(!(a<r.length)){n.next=13;break}if((i=r[a]).id){n.next=10;break}return n.next=9,(0,h.s3)(i);case 9:r[a].preview=n.sent;case 10:a++,n.next=4;break;case 13:C&&C(e),U(r);case 15:case"end":return n.stop()}}),n)}))),className:"btn btn-danger",children:"Eliminar"})]},t)}));return(0,p.useEffect)((function(){return function(){D.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}}),[D]),{DropzoneContenedor:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(j,(0,l.Z)((0,l.Z)({isDragActive:L},F({className:"dropzone"})),{},{children:[(0,g.jsx)("input",(0,l.Z)({},_())),L?(0,g.jsxs)("p",{children:["Suelta el fichero para subir",(0,g.jsx)(v.DUB,{})]}):(0,g.jsxs)("p",{children:[s," ",(0,g.jsx)(v.DUB,{})]})]})),(0,g.jsx)(w,{children:O})]}),files:D,setFiles:U}}},55597:function(e,t,n){e.exports=n.p+"static/media/laptop.6fd7a23d5c5b1513b798.jpg"}}]);
//# sourceMappingURL=61.c3304159.chunk.js.map