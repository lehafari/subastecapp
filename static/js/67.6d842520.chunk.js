"use strict";(self.webpackChunkcliente=self.webpackChunkcliente||[]).push([[67],{63067:function(a,e,t){t.r(e);var n=t(68014),r=t(49677),i=t(74498),u=t(80184);e.default=function(){return(0,u.jsx)(r.Z,{titulo:"Subastas",Icon:n.BUm,btnBackUrl:"/home",btnBackText:"Ir a inicio",breadCrumb:[{titulo:"Subastas"}],children:(0,u.jsx)(i.Z,{urlRequest:"/subastas"})})}},74498:function(a,e,t){t.d(e,{Z:function(){return D}});var n=t(74165),r=t(42982),i=t(15861),u=t(70885),o=t(56355),c=t(21213),s=t(15597),l=[{name:"ID",dataKey:"idsubasta"},{name:"Titulo",dataKey:"titulo",center:!0},{name:"Fecha Creaci\xf3n",dataKey:"dateCreatedFormated",center:!0},{name:"Fecha Inicio",dataKey:"fechaInicioFormated",center:!0},{name:"Fecha Finalizaci\xf3n",dataKey:"fechaFinalizacionFormated",center:!0},{name:"Costo Puja",dataKey:"costopuja",center:!0},{name:"Precio minimo",dataKey:"precioText",center:!0},{name:"Precio Subasta",dataKey:"precioSubastaFormated",center:!0},{name:"Acciones",dataKey:"options",center:!0}],d=t(33023),p=t(66273),m=t(80184),f=function(a){var e=a.el,t=a.eliminarSubasta,n=a.editarSubasta,r=e.idsubasta;return(0,m.jsxs)(p.Z,{children:[(0,m.jsxs)(p.K,{color:"info",to:"/admin/subastas/detalle-subasta/".concat(r),children:[(0,m.jsx)(o.DAO,{})," Detalle Subasta"]}),(0,m.jsxs)(p.K,{color:"primary",onClick:function(){return n(r)},children:[(0,m.jsx)(o.tU3,{})," Editar Subasta"]}),(0,m.jsxs)(p.K,{color:"danger",onClick:function(){return t(r)},children:[(0,m.jsx)(o.Xm5,{})," Eliminar Subasta"]})]})},b=t(73528),h=t.n(b),x=function(a){var e=a.data,t=a.eliminarSubasta,n=a.editarSubasta;return e.map((function(a){var e;(a.options=(0,m.jsx)(f,{el:a,eliminarSubasta:t,editarSubasta:n}),a.date_created&&(a.dateCreatedFormated=h()(a.date_created).format("DD/MM/YYYY")),a.fechaInicio&&(a.fechaInicioFormated=h()(a.fechaInicio).format("DD/MM/YYYY HH:mm:ss")),a.fechaFinalizacion&&(a.fechaFinalizacionFormated=h()(a.fechaFinalizacion).format("DD/MM/YYYY HH:mm:ss")),a.preciominimo)&&(a.precioText=(0,s.Mw)(null!==(e=a.preciominimo)&&void 0!==e&&e.toFixed(2)?a.preciominimo.toFixed(2):a.preciominimo)+" "+s.D1);return a.preciosubasta?a.precioSubastaFormated=s.zW.format(a.preciosubasta):a.precioSubastaFormated="0.01 $",a}))},Z=t(1413),v=t(72791),S=t(92506),j=t(69600),F=t(37633),q=t(73054),y=t(53772),k=t(39354),I=t(9085),C=t(11161),g=function(a){var e=a.addSubasta,t=a.productos,r=a.paqueteBids,o=(0,C.d)().cerrarModal,l=(0,v.useState)(null),d=(0,u.Z)(l,2),p=d[0],f=d[1],b=(0,v.useState)(null),h=(0,u.Z)(b,2),x=h[0],g=h[1],B=(0,v.useState)(""),w=(0,u.Z)(B,2),z=w[0],D=w[1],P=(0,k.Z)({arrValues:[{label:"Producto",name:"producto"},{label:"Paquete Bid",name:"paqueteBid"}]}),K=P.Tabset,Y=P.selectedTab,E={titulo:"",productoid:null,paqueteBidId:null,costopuja:1,preciominimo:"",fechaInicio:s.I9,fechaFinalizacion:s.I9};function M(){return(M=(0,i.Z)((0,n.Z)().mark((function a(t){var r,i;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.fechaInicio>=t.fechaFinalizacion)){a.next=2;break}return a.abrupt("return",I.Am.error("Fecha actual no puede ser mayor que la finalizacion"));case 2:if(!p){a.next=5;break}if(z){a.next=5;break}return a.abrupt("return",I.Am.error("Por favor, elige una foto"));case 5:return a.prev=5,a.next=8,c.Z.post("/subastas",(0,Z.Z)((0,Z.Z)({},t),{},{fotoSubasta:z}));case 8:r=a.sent,i=r.data,I.Am.success(i.msg),f(null),g(null),e(i.subasta),o(),a.next=20;break;case 17:a.prev=17,a.t0=a.catch(5),(0,s.S3)(a.t0);case 20:case"end":return a.stop()}}),a,null,[[5,17]])})))).apply(this,arguments)}var H="producto"===Y;function N(a){H?f(a):g(a),D(null)}var T="producto"===Y?t.map((function(a){return{label:a.nombre,value:a.idproducto}})):r.map((function(a){return{label:a.cantidadBids+" Bids",value:a.idpaquete}}));return(0,m.jsx)(S.J9,{validate:j.Z,initialValues:E,onSubmit:function(a){return M.apply(this,arguments)},children:function(a){var e=a.setFieldValue;return(0,m.jsxs)(S.l0,{children:[(0,m.jsx)(K,{onChange:function(a){return function(a,e){a!==Y&&("producto"===a&&(g(null),e("paqueteBid",null)),"paqueteBid"===a&&(f(null),e("productoid",null)),D(null))}(a,e)}}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsxs)("div",{className:"col-lg-6",children:[F.Z.map((function(a){return(0,v.createElement)(q.II,(0,Z.Z)((0,Z.Z)({},a),{},{key:a.name}))})),(0,m.jsx)(q.xZ,{name:"fechaInicio",label:"Fecha Inicio",required:!0}),(0,m.jsx)(q.xZ,{name:"fechaFinalizacion",label:"Fecha Finalizacion",required:!0}),(0,m.jsx)(q.Ph,{label:H?"Elija un producto":"Elija un paquete de Bids",required:!0,values:T,name:H?"productoid":"paqueteBidId",busquedaInput:!0,onChange:N}),(0,m.jsx)(q.zx,{text:"Crear Subasta"})]}),(0,m.jsx)("div",{className:"col-lg-6",children:(0,m.jsx)(y.Z,{productoSeleccionado:p,paqueteBidSeleccionado:x,paqueteBids:r,productos:t,setFotoSubasta:D,fotoSubasta:z})})]})]})}})},B=t(63812),w=t(13293),z=t(41297),D=function(a){var e=(0,w.U)().setLoader,t=(0,C.d)().setModal,p=(0,z.Z)([],{url:a.urlRequest}),f=(0,u.Z)(p,4),b=f[0],h=f[1],Z=f[3],v=function(){var a=(0,i.Z)((0,n.Z)().mark((function a(){var i,o,s,l,d;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e(!0,"Cargando..."),a.next=3,Promise.all([(0,c.Z)("productos/selectProductosIdName"),(0,c.Z)("paquete-bids")]);case 3:i=a.sent,o=(0,u.Z)(i,2),s=o[0],l=o[1],d=function(a){return Z([a].concat((0,r.Z)(b)))},t({titulo:"Crear Subasta",bgHeader:"primary",size:"xl",content:(0,m.jsx)(g,{addSubasta:d,productos:s.data,paqueteBids:l.data})}),e(!1);case 10:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();function S(){return(S=(0,i.Z)((0,n.Z)().mark((function a(r){var i,o,l,d,p,f;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e(!0,"Cargando subasta..."),a.next=4,Promise.all([(0,c.Z)("productos/selectProductosIdName"),(0,c.Z)("paquete-bids"),(0,c.Z)("/subastas/".concat(r))]);case 4:i=a.sent,o=(0,u.Z)(i,3),l=o[0],d=o[1],p=o[2],f=function(a){return Z(b.map((function(e){return e.idsubasta===a.idsubasta?a:e})))},t({titulo:"Editar Subasta",bgHeader:"secondary",size:"xl",content:(0,m.jsx)(B.Z,{subasta:p.data,setSubasta:f,productos:l.data,paqueteBids:d.data})}),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),(0,s.S3)(a.t0);case 16:return a.prev=16,e(!1),a.finish(16);case 19:case"end":return a.stop()}}),a,null,[[0,13,16,19]])})))).apply(this,arguments)}return(0,m.jsx)(d.Z,{data:x({data:b,eliminarSubasta:function(a){(0,s.mJ)({title:"Eliminar subasta",text:"No ser\xe1s capz de recuperarlo!",urlDelete:"subastas/".concat(a),callback:function(){Z(b.filter((function(e){return e.idsubasta!==a})))}})},editarSubasta:function(a){return S.apply(this,arguments)}}),heading:a.heading||l,loading:h,titulo:a.titulo,canSearch:a.canSearch,showPagination:a.showPagination,buttonHeader:"/subastas"===a.urlRequest?(0,m.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:v,children:(0,m.jsx)(o.wEH,{})}):null})}},41297:function(a,e,t){var n=t(74165),r=t(15861),i=t(70885),u=t(72791),o=t(21213);e.Z=function(a,e){var t=e.url,c=e.onCompleteData,s=e.recieveDataFromCompleteData,l=(0,u.useState)(a),d=(0,i.Z)(l,2),p=d[0],m=d[1],f=(0,u.useState)(!0),b=(0,i.Z)(f,2),h=b[0],x=b[1];function Z(){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)((0,n.Z)().mark((function a(){var e;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,o.Z)(t);case 3:e=a.sent,c&&(s&&m(c(e.data)?e.data:c(e.data)),c(e.data)),m(e.data),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:return a.prev=11,x(!1),a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[0,8,11,14]])})))).apply(this,arguments)}return(0,u.useEffect)((function(){Z()}),[]),[p,h,Z,m,x]}}}]);
//# sourceMappingURL=67.6d842520.chunk.js.map