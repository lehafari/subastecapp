{"version":3,"file":"static/js/67.6d842520.chunk.js","mappings":"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","sources":["components/views/subastas/Subastas.tsx","components/views/subastas/components/Table/HeadingSubasta.tsx","components/views/subastas/components/Table/ButtonsTableSubasta.tsx","components/views/subastas/components/Table/MapeoSubastas.tsx","components/views/subastas/components/forms/FormCrearSubasta.tsx","components/views/subastas/components/Table/DataTableSubata.tsx","hooks/useRequestData.ts"],"sourcesContent":["import { GiReceiveMoney } from 'react-icons/gi';\r\nimport PageComponent from '../../layout/app/Content/PageComponent';\r\nimport DataTableSubata from './components/Table/DataTableSubata';\r\nconst Subastas: React.FC = () => (\r\n\t<PageComponent\r\n\t\ttitulo={'Subastas'}\r\n\t\tIcon={GiReceiveMoney}\r\n\t\tbtnBackUrl={'/home'}\r\n\t\tbtnBackText={'Ir a inicio'}\r\n\t\tbreadCrumb={[{ titulo: 'Subastas' }]}\r\n\t>\r\n\t\t<DataTableSubata urlRequest={'/subastas'} />\r\n\t</PageComponent>\r\n);\r\n\r\nexport default Subastas;\r\n","import { HeadDataTable } from '../../../../layout/common/tables/datatable/interfaces';\r\n\r\nconst HeadingSubasta: HeadDataTable[] = [\r\n\t{ name: 'ID', dataKey: 'idsubasta' },\r\n\t{ name: 'Titulo', dataKey: 'titulo', center: true },\r\n\t{ name: 'Fecha Creación', dataKey: 'dateCreatedFormated', center: true },\r\n\t{ name: 'Fecha Inicio', dataKey: 'fechaInicioFormated', center: true },\r\n\t{ name: 'Fecha Finalización', dataKey: 'fechaFinalizacionFormated', center: true },\r\n\t{ name: 'Costo Puja', dataKey: 'costopuja', center: true },\r\n\t{ name: 'Precio minimo', dataKey: 'precioText', center: true },\r\n\t{ name: 'Precio Subasta', dataKey: 'precioSubastaFormated', center: true },\r\n\t{ name: 'Acciones', dataKey: 'options', center: true },\r\n];\r\n\r\nexport default HeadingSubasta;\r\n","import { FaInfoCircle, FaPen, FaTrash } from 'react-icons/fa';\r\nimport Dropdown, { ButtonDropdown } from '../../../../layout/common/tables/Dropdown';\r\nimport { SubastaType } from '../../types';\r\n\r\ninterface IButtonsSubasta {\r\n\tel: SubastaType;\r\n\teliminarSubasta(id: number): void;\r\n\teditarSubasta(id: number): void;\r\n}\r\n\r\nconst ButtonsTableSubasta: React.FunctionComponent<IButtonsSubasta> = props => {\r\n\tconst { el, eliminarSubasta, editarSubasta } = props;\r\n\tconst { idsubasta } = el;\r\n\r\n\tconst handleUpdate = () => editarSubasta(idsubasta);\r\n\tconst handleDelete = () => eliminarSubasta(idsubasta);\r\n\r\n\treturn (\r\n\t\t<Dropdown>\r\n\t\t\t<ButtonDropdown\r\n\t\t\t\tcolor=\"info\"\r\n\t\t\t\tto={`/admin/subastas/detalle-subasta/${idsubasta}`}\r\n\t\t\t>\r\n\t\t\t\t<FaInfoCircle /> Detalle Subasta\r\n\t\t\t</ButtonDropdown>\r\n\t\t\t<ButtonDropdown color=\"primary\" onClick={handleUpdate}>\r\n\t\t\t\t<FaPen /> Editar Subasta\r\n\t\t\t</ButtonDropdown>\r\n\t\t\t<ButtonDropdown color=\"danger\" onClick={handleDelete}>\r\n\t\t\t\t<FaTrash /> Eliminar Subasta\r\n\t\t\t</ButtonDropdown>\r\n\t\t</Dropdown>\r\n\t);\r\n};\r\n\r\nexport default ButtonsTableSubasta;\r\n","import ButtonsTableSubasta from './ButtonsTableSubasta';\r\nimport moment from 'moment-timezone';\r\nimport { controlDecimal, formatter, SMONEY } from '../../../../utils';\r\nimport { SubastaTableType } from '../../types';\r\n\r\ninterface IMapSubasta {\r\n\tdata: SubastaTableType[];\r\n\teliminarSubasta(id: number): void;\r\n\teditarSubasta(id: number): void;\r\n}\r\n\r\nconst MapeoSubastas = ({ data, eliminarSubasta, editarSubasta }: IMapSubasta) => {\r\n\tconst newData = data.map(item => {\r\n\t\titem.options = (\r\n\t\t\t<ButtonsTableSubasta\r\n\t\t\t\tel={item}\r\n\t\t\t\teliminarSubasta={eliminarSubasta}\r\n\t\t\t\teditarSubasta={editarSubasta}\r\n\t\t\t/>\r\n\t\t);\r\n\r\n\t\tif (item.date_created) {\r\n\t\t\titem.dateCreatedFormated = moment(item.date_created).format('DD/MM/YYYY');\r\n\t\t}\r\n\r\n\t\tif (item.fechaInicio) {\r\n\t\t\titem.fechaInicioFormated = moment(item.fechaInicio).format(\r\n\t\t\t\t'DD/MM/YYYY HH:mm:ss'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (item.fechaFinalizacion) {\r\n\t\t\titem.fechaFinalizacionFormated = moment(item.fechaFinalizacion).format(\r\n\t\t\t\t'DD/MM/YYYY HH:mm:ss'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (item.preciominimo) {\r\n\t\t\titem.precioText =\r\n\t\t\t\tcontrolDecimal(\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\titem.preciominimo?.toFixed(2)\r\n\t\t\t\t\t\t? // @ts-ignore\r\n\t\t\t\t\t\t  item.preciominimo.toFixed(2)\r\n\t\t\t\t\t\t: item.preciominimo\r\n\t\t\t\t) +\r\n\t\t\t\t' ' +\r\n\t\t\t\tSMONEY;\r\n\t\t}\r\n\r\n\t\tif (item.preciosubasta) {\r\n\t\t\t//@ts-ignore\r\n\t\t\titem.precioSubastaFormated = formatter.format(item.preciosubasta);\r\n\t\t} else {\r\n\t\t\titem.precioSubastaFormated = `0.01 $`;\r\n\t\t}\r\n\r\n\t\treturn item;\r\n\t});\r\n\treturn newData;\r\n};\r\n\r\nexport default MapeoSubastas;\r\n","import { useState } from 'react';\r\nimport { Formik, Form, FormikHelpers } from 'formik';\r\nimport validarSubasta from '../validations/validarSubasta';\r\nimport dataInputsSubastas from './dataInputs';\r\n\r\n// COMPONENTS\r\nimport { Input, Select, Button, DateTimePicker } from '../../../../layout/common/forms';\r\nimport MostrarElementSelected from './MostrarElementSelected';\r\n\r\n// HOOKS\r\nimport useTabs from '../../../../../hooks/useTabs';\r\nimport { toast } from 'react-toastify';\r\nimport { handleError, fechaActual } from '../../../../utils';\r\nimport clienteAxios from '../../../../../config/axios';\r\nimport { SubastaType } from '../../types';\r\nimport { ProductoType } from '../../../articulos_productos/types';\r\nimport { PaqueteBidType } from '../../../settings_paquete_bids/types';\r\nimport { useModal } from '../../../../../context/modal/ModalState';\r\n\r\ninterface IFormCrearSubastaProps {\r\n\taddSubasta(value: SubastaType): void;\r\n\tproductos: ProductoType[];\r\n\tpaqueteBids: PaqueteBidType[];\r\n}\r\n\r\nconst FormCrearSubasta: React.FunctionComponent<IFormCrearSubastaProps> = props => {\r\n\tconst { addSubasta, productos, paqueteBids } = props;\r\n\tconst { cerrarModal } = useModal();\r\n\tconst [productoActual, setProductoActual] = useState(null);\r\n\tconst [paqueteBidSelecionado, setPaqueteBidSeleccionado] = useState(null);\r\n\tconst [fotoSubasta, setFotoSubasta] = useState('');\r\n\tconst { Tabset, selectedTab } = useTabs({\r\n\t\tarrValues: [\r\n\t\t\t{ label: 'Producto', name: 'producto' },\r\n\t\t\t{ label: 'Paquete Bid', name: 'paqueteBid' },\r\n\t\t],\r\n\t});\r\n\tconst INITIAL_VALUES: SubastaType = {\r\n\t\ttitulo: '',\r\n\t\tproductoid: null,\r\n\t\tpaqueteBidId: null,\r\n\t\tcostopuja: 1,\r\n\t\tpreciominimo: '',\r\n\t\tfechaInicio: fechaActual,\r\n\t\tfechaFinalizacion: fechaActual,\r\n\t};\r\n\r\n\tasync function handleSubmit(values: SubastaType) {\r\n\t\tif (values.fechaInicio >= values.fechaFinalizacion) {\r\n\t\t\treturn toast.error('Fecha actual no puede ser mayor que la finalizacion');\r\n\t\t}\r\n\r\n\t\tif (productoActual) {\r\n\t\t\tif (!fotoSubasta) return toast.error('Por favor, elige una foto');\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst { data } = await clienteAxios.post('/subastas', {\r\n\t\t\t\t...values,\r\n\t\t\t\tfotoSubasta,\r\n\t\t\t});\r\n\r\n\t\t\ttoast.success(data.msg);\r\n\t\t\tsetProductoActual(null);\r\n\t\t\tsetPaqueteBidSeleccionado(null);\r\n\t\t\taddSubasta(data.subasta);\r\n\t\t\tcerrarModal();\r\n\t\t} catch (error) {\r\n\t\t\thandleError(error);\r\n\t\t}\r\n\t}\r\n\r\n\t// @ts-ignore\r\n\tfunction onChangeTab(selected, setFieldValue) {\r\n\t\tif (selected !== selectedTab) {\r\n\t\t\tif (selected === 'producto') {\r\n\t\t\t\tsetPaqueteBidSeleccionado(null);\r\n\t\t\t\tsetFieldValue('paqueteBid', null);\r\n\t\t\t}\r\n\t\t\tif (selected === 'paqueteBid') {\r\n\t\t\t\tsetProductoActual(null);\r\n\t\t\t\tsetFieldValue('productoid', null);\r\n\t\t\t}\r\n\t\t\tsetFotoSubasta(null);\r\n\t\t}\r\n\t}\r\n\tconst isSelectedProducto = selectedTab === 'producto';\r\n\r\n\tfunction onChangeSelect(value: string) {\r\n\t\tif (isSelectedProducto) setProductoActual(value);\r\n\t\telse setPaqueteBidSeleccionado(value);\r\n\t\tsetFotoSubasta(null);\r\n\t}\r\n\r\n\tconst arrSelect =\r\n\t\tselectedTab === 'producto'\r\n\t\t\t? productos.map(p => ({\r\n\t\t\t\t\tlabel: p.nombre,\r\n\t\t\t\t\tvalue: p.idproducto,\r\n\t\t\t  }))\r\n\t\t\t: paqueteBids.map(p => ({\r\n\t\t\t\t\tlabel: p.cantidadBids + ' Bids',\r\n\t\t\t\t\tvalue: p.idpaquete,\r\n\t\t\t  }));\r\n\r\n\treturn (\r\n\t\t<Formik\r\n\t\t\tvalidate={validarSubasta}\r\n\t\t\tinitialValues={INITIAL_VALUES}\r\n\t\t\tonSubmit={handleSubmit}\r\n\t\t>\r\n\t\t\t{({ setFieldValue }) => (\r\n\t\t\t\t<Form>\r\n\t\t\t\t\t<Tabset\r\n\t\t\t\t\t\tonChange={selected =>\r\n\t\t\t\t\t\t\tonChangeTab(selected, setFieldValue)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-lg-6\">\r\n\t\t\t\t\t\t\t{dataInputsSubastas.map(field => (\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tkey={field.name}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t\t\t<DateTimePicker\r\n\t\t\t\t\t\t\t\tname={'fechaInicio'}\r\n\t\t\t\t\t\t\t\tlabel={'Fecha Inicio'}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<DateTimePicker\r\n\t\t\t\t\t\t\t\tname={'fechaFinalizacion'}\r\n\t\t\t\t\t\t\t\tlabel={'Fecha Finalizacion'}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t\tisSelectedProducto\r\n\t\t\t\t\t\t\t\t\t\t? 'Elija un producto'\r\n\t\t\t\t\t\t\t\t\t\t: 'Elija un paquete de Bids'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tvalues={arrSelect}\r\n\t\t\t\t\t\t\t\tname={\r\n\t\t\t\t\t\t\t\t\tisSelectedProducto\r\n\t\t\t\t\t\t\t\t\t\t? 'productoid'\r\n\t\t\t\t\t\t\t\t\t\t: 'paqueteBidId'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbusquedaInput\r\n\t\t\t\t\t\t\t\tonChange={onChangeSelect}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<Button text={'Crear Subasta'} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-lg-6\">\r\n\t\t\t\t\t\t\t<MostrarElementSelected\r\n\t\t\t\t\t\t\t\tproductoSeleccionado={\r\n\t\t\t\t\t\t\t\t\tproductoActual\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tpaqueteBidSeleccionado={\r\n\t\t\t\t\t\t\t\t\tpaqueteBidSelecionado\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tpaqueteBids={paqueteBids}\r\n\t\t\t\t\t\t\t\tproductos={productos}\r\n\t\t\t\t\t\t\t\tsetFotoSubasta={setFotoSubasta}\r\n\t\t\t\t\t\t\t\tfotoSubasta={fotoSubasta}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Form>\r\n\t\t\t)}\r\n\t\t</Formik>\r\n\t);\r\n};\r\n\r\nexport default FormCrearSubasta;\r\n","import { FaPlus } from 'react-icons/fa';\r\nimport clienteAxios from '../../../../../config/axios';\r\nimport { handleError, DeleteInfo } from '../../../../utils';\r\n\r\n// COMPONENTS\r\nimport HeadingSubasta from './HeadingSubasta';\r\nimport DataTable from '../../../../layout/common/tables/datatable';\r\nimport MapeoSubastas from './MapeoSubastas';\r\nimport FormCrearSubasta from '../forms/FormCrearSubasta';\r\nimport FormEditarSubasta from '../forms/FormEditarSubasta';\r\n\r\n// HOOKS\r\nimport { useLoader } from '../../../../../context/loaderpage/LoaderPageState';\r\nimport { useModal } from '../../../../../context/modal/ModalState';\r\nimport { SubastaTableType, SubastaType } from '../../types';\r\nimport useRequestData from '../../../../../hooks/useRequestData';\r\nimport React from 'react';\r\nimport { HeadDataTable } from '../../../../layout/common/tables/datatable/interfaces';\r\n\r\ninterface IDataTableSubasta {\r\n\turlRequest: string;\r\n\ttitulo?: React.ReactNode;\r\n\tcanSearch?: boolean;\r\n\tshowPagination?: boolean;\r\n\theading?: HeadDataTable[];\r\n}\r\n\r\nconst DataTableSubata: React.FC<IDataTableSubasta> = props => {\r\n\tconst { setLoader } = useLoader();\r\n\tconst { setModal } = useModal();\r\n\tconst [data, cargando, , setDatos] = useRequestData<SubastaTableType[]>([], {\r\n\t\turl: props.urlRequest,\r\n\t});\r\n\r\n\tconst crearSubasta = async () => {\r\n\t\tsetLoader(true, 'Cargando...');\r\n\t\tconst [productos, paqueteBids] = await Promise.all([\r\n\t\t\tclienteAxios('productos/selectProductosIdName'),\r\n\t\t\tclienteAxios('paquete-bids'),\r\n\t\t]);\r\n\r\n\t\tconst addSubasta = (subasta: SubastaType) => setDatos([subasta, ...data]);\r\n\t\tsetModal({\r\n\t\t\ttitulo: 'Crear Subasta',\r\n\t\t\tbgHeader: 'primary',\r\n\t\t\tsize: 'xl',\r\n\t\t\tcontent: (\r\n\t\t\t\t<FormCrearSubasta\r\n\t\t\t\t\taddSubasta={addSubasta}\r\n\t\t\t\t\tproductos={productos.data}\r\n\t\t\t\t\tpaqueteBids={paqueteBids.data}\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t});\r\n\t\tsetLoader(false);\r\n\t};\r\n\r\n\tasync function editarSubasta(id: number) {\r\n\t\ttry {\r\n\t\t\tsetLoader(true, 'Cargando subasta...');\r\n\r\n\t\t\tconst [productos, paqueteBids, paqueteActual] = await Promise.all([\r\n\t\t\t\tclienteAxios('productos/selectProductosIdName'),\r\n\t\t\t\tclienteAxios('paquete-bids'),\r\n\t\t\t\tclienteAxios(`/subastas/${id}`),\r\n\t\t\t]);\r\n\r\n\t\t\tconst setSubasta = (subasta: SubastaType) =>\r\n\t\t\t\tsetDatos(\r\n\t\t\t\t\tdata.map(u =>\r\n\t\t\t\t\t\tu.idsubasta === subasta.idsubasta ? subasta : u\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\r\n\t\t\tsetModal({\r\n\t\t\t\ttitulo: 'Editar Subasta',\r\n\t\t\t\tbgHeader: 'secondary',\r\n\t\t\t\tsize: 'xl',\r\n\t\t\t\tcontent: (\r\n\t\t\t\t\t<FormEditarSubasta\r\n\t\t\t\t\t\tsubasta={paqueteActual.data}\r\n\t\t\t\t\t\tsetSubasta={setSubasta}\r\n\t\t\t\t\t\tproductos={productos.data}\r\n\t\t\t\t\t\tpaqueteBids={paqueteBids.data}\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\thandleError(e);\r\n\t\t} finally {\r\n\t\t\tsetLoader(false);\r\n\t\t}\r\n\t}\r\n\r\n\tconst eliminarSubasta = (id: number) => {\r\n\t\tDeleteInfo({\r\n\t\t\ttitle: 'Eliminar subasta',\r\n\t\t\ttext: 'No serás capz de recuperarlo!',\r\n\t\t\turlDelete: `subastas/${id}`,\r\n\t\t\tcallback() {\r\n\t\t\t\tsetDatos(data.filter(d => d.idsubasta !== id));\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\treturn (\r\n\t\t<DataTable\r\n\t\t\tdata={MapeoSubastas({ data, eliminarSubasta, editarSubasta })}\r\n\t\t\theading={props.heading || HeadingSubasta}\r\n\t\t\tloading={cargando}\r\n\t\t\ttitulo={props.titulo}\r\n\t\t\tcanSearch={props.canSearch}\r\n\t\t\tshowPagination={props.showPagination}\r\n\t\t\tbuttonHeader={\r\n\t\t\t\tprops.urlRequest === '/subastas' ? (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"btn btn-secondary btn-sm\"\r\n\t\t\t\t\t\tonClick={crearSubasta}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FaPlus />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : null\r\n\t\t\t}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default DataTableSubata;\r\n","import { useState, useEffect } from 'react';\r\nimport clienteAxios from '../config/axios';\r\nimport { useRequestInterface } from './interfaces';\r\n\r\ntype ReturnUseRequestData<T> = [\r\n\tT,\r\n\tboolean,\r\n\t() => void,\r\n\t(newValues: T) => void,\r\n\t(cargando: boolean) => void\r\n];\r\n\r\nconst useRequestData = <T>(\r\n\tSTATE_INICIAL: T,\r\n\t{ url, onCompleteData, recieveDataFromCompleteData }: useRequestInterface<T>\r\n): ReturnUseRequestData<T> => {\r\n\tconst [data, setData] = useState<T>(STATE_INICIAL);\r\n\tconst [cargando, setCargando] = useState(true);\r\n\r\n\tuseEffect(() => {\r\n\t\tobtenerDatos();\r\n\t\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\tasync function obtenerDatos() {\r\n\t\ttry {\r\n\t\t\tconst request = await clienteAxios(url);\r\n\t\t\tif (onCompleteData) {\r\n\t\t\t\tif (recieveDataFromCompleteData) {\r\n\t\t\t\t\tsetData(\r\n\t\t\t\t\t\tonCompleteData(request.data)\r\n\t\t\t\t\t\t\t? request.data\r\n\t\t\t\t\t\t\t: onCompleteData(request.data)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tonCompleteData(request.data);\r\n\t\t\t}\r\n\t\t\tsetData(request.data);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t} finally {\r\n\t\t\tsetCargando(false);\r\n\t\t}\r\n\t}\r\n\r\n\treturn [data, cargando, obtenerDatos, setData, setCargando];\r\n};\r\n\r\nexport default useRequestData;\r\n"],"names":["titulo","Icon","GiReceiveMoney","btnBackUrl","btnBackText","breadCrumb","urlRequest","name","dataKey","center","props","el","eliminarSubasta","editarSubasta","idsubasta","Dropdown","color","to","onClick","data","map","item","options","date_created","dateCreatedFormated","moment","format","fechaInicio","fechaInicioFormated","fechaFinalizacion","fechaFinalizacionFormated","preciominimo","precioText","controlDecimal","toFixed","SMONEY","preciosubasta","precioSubastaFormated","formatter","addSubasta","productos","paqueteBids","cerrarModal","useModal","useState","productoActual","setProductoActual","paqueteBidSelecionado","setPaqueteBidSeleccionado","fotoSubasta","setFotoSubasta","useTabs","arrValues","label","Tabset","selectedTab","INITIAL_VALUES","productoid","paqueteBidId","costopuja","fechaActual","values","toast","clienteAxios","msg","subasta","handleError","isSelectedProducto","onChangeSelect","value","arrSelect","p","nombre","idproducto","cantidadBids","idpaquete","validate","validarSubasta","initialValues","onSubmit","setFieldValue","onChange","selected","onChangeTab","className","dataInputsSubastas","field","key","required","busquedaInput","text","MostrarElementSelected","productoSeleccionado","paqueteBidSeleccionado","setLoader","useLoader","setModal","useRequestData","url","cargando","setDatos","crearSubasta","Promise","all","bgHeader","size","content","id","paqueteActual","setSubasta","u","FormEditarSubasta","MapeoSubastas","DeleteInfo","title","urlDelete","callback","filter","d","heading","HeadingSubasta","loading","canSearch","showPagination","buttonHeader","STATE_INICIAL","onCompleteData","recieveDataFromCompleteData","setData","setCargando","obtenerDatos","request","console","log","useEffect"],"sourceRoot":""}