"use strict";(self.webpackChunkcliente=self.webpackChunkcliente||[]).push([[341],{65363:function(a,e,t){var s=t(35881),n=t(80184);e.Z=function(a){var e=a.mensaje;return(0,n.jsx)(s.Z,{children:(0,n.jsx)("h4",{className:"text-center",children:e})})}},95341:function(a,e,t){t.r(e),t.d(e,{default:function(){return W}});var s,n,r=t(74165),i=t(15861),u=t(70885),o=t(72791),c=t(49677),d=t(68014),l=t(16871),p=t(21213),m=t(9085),x=t(42982),j=t(1413),b=t(30168),f=t(35881),h=t(15597),v=t(63463),g=t(73528),Z=t.n(g),S=t(13293),y=t(11161),k=t(56355),P=t(63812),D=t(80184),M=v.ZP.div(s||(s=(0,b.Z)(["\n\tbackground: ",";\n\twidth: 100px;\n\theight: 100px;\n\tborder-radius: 10px;\n\tmargin: 10px auto;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tcolor: #fff;\n\tflex-direction: column;\n"])),(function(a){return a.background})),Y=function(a){var e=a.subasta,t=(0,S.U)().setLoader,s=(0,y.d)().setModal;function n(){return n=(0,i.Z)((0,r.Z)().mark((function n(){var i,o,c,d,l,m;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t(!0,"Cargando subasta..."),n.next=4,Promise.all([(0,p.Z)("productos/selectProductosIdName"),(0,p.Z)("paquete-bids"),(0,p.Z)("/subastas/".concat(e.idsubasta))]);case 4:i=n.sent,o=(0,u.Z)(i,3),c=o[0],d=o[1],l=o[2],m=function(e){a.setSubasta((0,j.Z)((0,j.Z)({},a.subasta),e))},s({titulo:"Editar Subasta",bgHeader:"secondary",size:"xl",content:(0,D.jsx)(P.Z,{subasta:l.data,setSubasta:m,productos:c.data,paqueteBids:d.data})}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),(0,h.S3)(n.t0);case 16:return n.prev=16,t(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[0,13,16,19]])}))),n.apply(this,arguments)}return(0,D.jsxs)(f.Z,{className:"text-center",children:[e.producto?(0,D.jsx)("img",{src:h.PF+e.fotoSubasta,className:"user-img rounded-circle",alt:""}):(0,D.jsxs)(M,{background:e.paqueteBid.background,children:[(0,D.jsxs)("span",{children:[e.paqueteBid.cantidadBids," Bids"]}),e.paqueteBid.bonus?(0,D.jsxs)("small",{children:[e.paqueteBid.bonus," BONUS"]}):null]}),(0,D.jsxs)(B,{hanPujado:a.hanPujado,children:[(0,D.jsx)("h4",{children:e.titulo}),(0,D.jsx)(C,{titulo:"ID Subasta",text:e.idsubasta}),(0,D.jsx)(C,{titulo:"Costo Puja",text:e.costopuja}),(0,D.jsx)(C,{titulo:"Precio minimo",text:"".concat(h.zW.format(e.preciominimo).replace("$","")," USD")}),(0,D.jsx)(C,{titulo:"Precio Subasta",text:"".concat(h.zW.format(e.preciosubasta?e.preciosubasta:.01).replace("$","")," USD")}),(0,D.jsx)(C,{titulo:"Fecha creaci\xf3n",text:Z()(e.date_created).format("DD/MM/YYYY")}),(0,D.jsx)(C,{titulo:"Fecha inicio",text:Z()(e.fechaInicio).format("DD/MM/YYYY H:m:s")}),(0,D.jsx)(C,{titulo:"Fecha finalizaci\xf3n",text:Z()(e.fechaFinalizacion).format("DD/MM/YYYY H:m:s")}),(0,D.jsxs)("button",{className:"btn btn-primary mt-2",onClick:function(){return n.apply(this,arguments)},children:["Editar Subasta ",(0,D.jsx)(k.tU3,{})]})]})]})},C=function(a){return(0,D.jsx)("h6",{children:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("b",{children:[a.titulo,":"]})," ",a.text]})})},B=v.ZP.div(n||(n=(0,b.Z)(["\n\tbackground-color: ",";\n\tpadding: 20px 0px;\n\tborder-radius: 10px;\n\ttransition: 0.3s ease;\n"])),(function(a){return a.hanPujado?"#fdca20":"#ffff"})),N=t(33023),U=t(66273),F=t(60209),w=function(a){var e=(0,S.U)().setLoader,t=(0,y.d)().setModal;function s(){return(s=(0,i.Z)((0,r.Z)().mark((function a(s){var n,i,u;return(0,r.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e(!0,"Cargando usuario..."),n="usuarios/".concat(s),a.next=5,(0,p.Z)(n);case 5:i=a.sent,u=i.data,t({bgHeader:"secondary",content:(0,D.jsx)(F.Z,{persona:u}),size:"md",titulo:"Ver Usuario"}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),(0,h.S3)(a.t0);case 13:return a.prev=13,e(!1),a.finish(13);case 16:case"end":return a.stop()}}),a,null,[[0,10,13,16]])})))).apply(this,arguments)}return(0,D.jsx)(N.Z,{titulo:(0,D.jsx)("h3",{children:"Todas las pujas de esta Subasta"}),heading:[{name:"ID Puja",dataKey:"idpuja",center:!0},{name:"Usuario",dataKey:"nameFormated",center:!0},{name:"Cantidad Bids",dataKey:"cantidadBids",center:!0},{name:"Costo Puja",dataKey:"costopuja",center:!0},{name:"Modalidad",dataKey:"modalidadFormated",center:!0},{name:"Precio",dataKey:"price",center:!0},{name:"Acciones",dataKey:"options",center:!0}],data:a.pujas.map((function(a){console.log(a);var e=a.costopuja/100*a.cantidadBids,t=h.zW.format(e||0);return a.price=t+" USD",a.modalidadFormated="M"===a.modalidad?"Manual":"Autom\xe1tico",a.nameFormated=a.user.nombres+" "+(a.user.apellidos?a.user.apellidos:""),a.options=(0,D.jsx)(U.Z,{children:(0,D.jsxs)(U.K,{color:"primary",onClick:function(){return function(a){return s.apply(this,arguments)}(a.userid)},children:[(0,D.jsx)(k.dSq,{})," Ver Usuario"]})}),a})),loading:a.isLoading})},A=t(26152),L=t(69683);A.kL.register(A.qi,A.u,A.De);var q=function(a){var e=a.pujas;if(!e.length)return null;var t=e.filter((function(a){return"A"===a.modalidad})),s=e.filter((function(a){return"M"===a.modalidad})),n={labels:["Pujas Autom\xe1ticas","Pujas Manuales"],datasets:[{data:[t.length,s.length],backgroundColor:["#1f439a","#dc3545"],borderWidth:0}]};return(0,D.jsxs)(f.Z,{className:"d-flex justify-content-center",children:[(0,D.jsxs)("h4",{children:["Estadistica de Pujas Manuales y Autom\xe1ticas ",(0,D.jsx)(k.yQE,{})]}),(0,D.jsx)("span",{children:(0,D.jsx)(L.$I,{data:n,width:300,height:300,options:{maintainAspectRatio:!1,responsive:!0}})})]})},I=t(83494),K=function(a){var e=a.subasta,t=a.isLoading,s=o.useState(!1),n=(0,u.Z)(s,2),r=n[0],i=n[1],c=(0,I.s)().Socket;return o.useEffect((function(){c.on("subasta-".concat(e.idsubasta,"-puja"),(function(t){a.setSubasta((0,j.Z)((0,j.Z)({},e),{},{preciosubasta:t.preciosubasta})),a.setPujas([t.puja].concat((0,x.Z)(a.pujas))),i(!0),setTimeout((function(){return i(!1)}),750)}))}),[e]),(0,D.jsxs)(o.Fragment,{children:[(0,D.jsxs)("div",{className:"form-row",children:[(0,D.jsx)("div",{className:"col-lg-4",children:(0,D.jsx)(Y,{subasta:e,setSubasta:a.setSubasta,hanPujado:r})}),(0,D.jsx)("div",{className:"col-lg-8",children:(0,D.jsx)(q,{pujas:a.pujas})})]}),(0,D.jsx)(w,{isLoading:t,pujas:a.pujas})]})},z=t(93542),E=t(65363),W=function(){var a=(0,l.UO)().idsubasta,e=o.useState(),t=(0,u.Z)(e,2),s=t[0],n=t[1],x=o.useState([]),j=(0,u.Z)(x,2),b=j[0],f=j[1],h=o.useState(!0),v=(0,u.Z)(h,2),g=v[0],Z=v[1];return o.useEffect((function(){function e(){return(e=(0,i.Z)((0,r.Z)().mark((function e(){var t,s,i,o,c,d,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.Am.loading("Cargando subasta..."),e.prev=1,s="subastas/".concat(a),i="puja?subastaid=".concat(a),e.next=6,Promise.all([(0,p.Z)(s),(0,p.Z)(i)]);case 6:o=e.sent,c=(0,u.Z)(o,2),d=c[0],l=c[1],n(d.data),f(l.data),m.Am.update(t,{type:"success",render:"Subasta cargada correctamente",autoClose:3e3,isLoading:!1}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),m.Am.update(t,{type:"success",render:"Subasta no encontrada, o no cargada correctamente.",autoClose:3e3,isLoading:!1});case 18:return e.prev=18,Z(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),g?(0,D.jsx)(z.Z,{}):(0,D.jsx)(c.Z,{titulo:"Detalle Subasta",Icon:d.BUm,btnBackUrl:"/subastas",btnBackText:"Ir a Subastas",breadCrumb:[{titulo:"Subastas",link:"/subastas"},{titulo:"Detalle subasta"}],children:s?(0,D.jsx)(K,{pujas:b,isLoading:g,subasta:s,setSubasta:n,setPujas:f}):(0,D.jsx)(E.Z,{mensaje:"Subasta no encontrada"})})}},60209:function(a,e,t){var s=t(56355),n=t(73528),r=t.n(n),i=t(15597),u=t(80184);e.Z=function(a){var e=a.persona;if(!e)return null;var t=[{label:"ID",value:e.iduser},{label:"Username",value:e.username},{label:"Correo",value:e.email_user},{label:"Fecha Registro",value:r()(e.date_created).format("DD/MM/YYYY")},{label:"Rol",value:e.rol.nombrerol},{label:"Tel\xe9fono",value:e.telefono}];return(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("img",{src:(0,i.Mt)(e),alt:"",className:"user-img rounded-circle"}),(0,u.jsxs)("h4",{children:[e.nombres," ",e.apellidos]}),(0,u.jsxs)("h5",{className:"mb-3",children:["Datos Personales ",(0,u.jsx)(s.m3W,{})]}),t.map((function(a){var e=a.label,t=a.value;return(0,u.jsx)("p",{className:"mb-0 text-left",children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("b",{children:[e,":"]})," ",t]})},e)}))]})}}}]);
//# sourceMappingURL=341.cfb4e52f.chunk.js.map