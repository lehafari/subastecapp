"use strict";(self.webpackChunkcliente=self.webpackChunkcliente||[]).push([[457],{49677:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(43504),r=a(56355),i=a(80184),s=function(e){var t=e.breadCrumb,a=void 0===t?[]:t;return a.length?(0,i.jsxs)("ul",{className:"app-breadcrumb breadcrumb",children:[(0,i.jsx)("li",{className:"breadcrumb-item",children:(0,i.jsx)(n.rU,{to:"/home",className:"breadcrumb-item",children:(0,i.jsx)(r.xng,{})})}),a.map((function(e){var t=e.link,a=e.titulo;return(0,i.jsx)("li",{className:"breadcrumb-item",children:t?(0,i.jsx)(n.rU,{to:t,children:a}):a},a)}))]}):null},o=function(e){var t=e.btnBackUrl,a=e.btnBackText,s=e.titulo,o=e.descripcion,c=e.Icon;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("h1",{children:[t&&(0,i.jsxs)(n.rU,{to:"/admin"+t,className:"btn btn-dark shadow-0",children:[(0,i.jsx)(r.bUI,{size:10})," ",a]}),(0,i.jsx)(c,{className:"mx-2",color:"#1f439a",style:{verticalAlign:"middle"}}),s]}),o&&(0,i.jsx)("p",{className:"mt-2",children:o})]})},c=(a(72791),function(e){var t=e.btnBackUrl,a=e.btnBackText,n=e.titulo,r=e.Icon,c=e.descripcion,l=e.breadCrumb,d=e.showTitle,u=void 0===d||d;return(0,i.jsxs)("div",{className:"app-content",children:[u?(0,i.jsxs)("div",{className:"app-title",children:[(0,i.jsx)(o,{btnBackUrl:t,btnBackText:a,titulo:n,descripcion:c,Icon:r}),(0,i.jsx)(s,{breadCrumb:l})]}):null,e.children]})})},81173:function(e,t,a){var n=a(28175),r=a(35881),i=a(80184);t.Z=function(){return(0,i.jsx)(r.Z,{children:(0,i.jsxs)(n.ZP,{style:{width:"100%",height:"100%"},speed:1,backgroundColor:"#91d7e4",foregroundColor:"#f7f8fc",children:[(0,i.jsx)("rect",{x:"0",y:"0",width:"400%",height:"10"}),(0,i.jsx)("rect",{x:"0",y:"20",width:"20%",height:"10"}),(0,i.jsx)("rect",{x:"30",y:"20",width:"100%",height:"10"}),(0,i.jsx)("rect",{x:"340",y:"20",width:"60",height:"10"}),(0,i.jsx)("rect",{x:"0",y:"40",width:"400%",height:"10"}),(0,i.jsx)("rect",{x:"0",y:"60",width:"400%",height:"60"}),(0,i.jsx)("rect",{x:"0",y:"130",width:"20",height:"10"}),(0,i.jsx)("rect",{x:"30",y:"130",width:"100%",height:"10"}),(0,i.jsx)("rect",{x:"340",y:"130",width:"60",height:"10"}),(0,i.jsx)("rect",{x:"0",y:"150",width:"190",height:"80"}),(0,i.jsx)("rect",{x:"200",y:"150",width:"200",height:"80"}),(0,i.jsx)("rect",{x:"0",y:"240",width:"70",height:"10"}),(0,i.jsx)("rect",{x:"80",y:"240",width:"400%",height:"10"}),(0,i.jsx)("rect",{x:"0",y:"260",width:"70",height:"10"}),(0,i.jsx)("rect",{x:"80",y:"260",width:"400%",height:"10"})]})})}},66273:function(e,t,a){a.d(t,{K:function(){return m}});var n,r=a(70885),i=a(30168),s=a(72791),o=a(43504),c=a(63463),l=a(56355),d=a(80184),u=c.ZP.div(n||(n=(0,i.Z)(["\n\tposition: relative;\n\tdisplay: inline-block;\n\n\t.dropdown-menu {\n\t\tanimation-name: scaleZ;\n\t\tanimation-duration: 0.2s;\n\t\tanimation-iteration-count: normal;\n\n\t\tbutton,\n\t\ta {\n\t\t\tuser-select: none;\n\t\t\ttransition: all 0.15s ease !important;\n\t\t}\n\t}\n"]))),m=function(e){var t=e.color,a=e.to,n=e.onClick,r=e.children;return a?(0,d.jsx)(o.rU,{className:"dropdown-item btn-outline-".concat(t),to:a,children:r}):(0,d.jsx)("button",{className:"dropdown-item btn-outline-secondary",onClick:n,children:r})};t.Z=function(e){var t=e.children,a=(0,s.useState)(!1),n=(0,r.Z)(a,2),i=n[0],o=n[1],c=(0,s.useRef)(),m=function(){return o(!i)};function g(e){e.target!==c.current&&m()}return(0,s.useEffect)((function(){return i&&document.addEventListener("click",g),function(){document.removeEventListener("click",g)}})),(0,d.jsx)(u,{children:(0,d.jsxs)("div",{className:"dropdown dropleft",children:[(0,d.jsx)("button",{ref:c,className:"btn btn-secondary",onClick:m,type:"button",children:(0,d.jsx)(l.p4t,{style:{pointerEvents:"none"}})}),i&&(0,d.jsx)("div",{className:"dropdown-menu",children:t})]})})}},33023:function(e,t,a){a.d(t,{Z:function(){return N}});var n,r=a(70885),i=a(72791),s=a(30168),o=a(63463),c=a(56355),l=a(73502),d=a(80184),u=(0,o.ZP)(l.f)(n||(n=(0,s.Z)(["\n\tmargin-right: 20px;\n\t.icon {\n\t\tposition: absolute;\n\t\tright: -25px;\n\t\tbottom: 5px;\n\t\tcolor: var(--app-table-icon-search-color);\n\t}\n"]))),m=function(e){var t=e.buttonHeader,a=e.setQ,n=e.q,r=e.canSearch,i=void 0===r||r;return(0,d.jsxs)("div",{className:"d-flex justify-content-md-between justify-content-center flex-column flex-md-row text-center",children:[(0,d.jsx)("div",{className:"mb-3",children:t}),i?(0,d.jsxs)(u,{className:"form-group",children:[(0,d.jsx)("span",{className:"icon",children:(0,d.jsx)(c.U41,{})}),(0,d.jsx)("input",{type:"text",value:n,placeholder:"Buscar...",onChange:function(e){return a(e.target.value)}}),(0,d.jsx)("div",{className:"line",style:{bottom:"auto"}})]}):null]})},g=a(92506),h=function(e){var t=e.center,a=e.name,n=e.value;return(0,d.jsx)("td",{className:"".concat(t||"ID"===a?"text-center":""),children:n})},x=function(e){var t=e.heading,a=e.data,n=e.loading,r=function(e){var a=e.mensaje;return(0,d.jsx)("tr",{children:(0,d.jsx)("td",{className:"text-center",colSpan:Object.keys(t).length,children:a})})};return(0,d.jsx)("tbody",{children:Object.keys(a).length?a.map((function(e,a){return(0,d.jsx)("tr",{children:t.map((function(t){return(0,d.jsx)(h,{center:t.center,name:t.name,dataKey:t.dataKey,value:(0,g.u9)(e,t.dataKey)},t.name)}))},a)})):n?(0,d.jsx)(r,{mensaje:"Cargando datos..."}):(0,d.jsx)(r,{mensaje:"No hay datos actualmente..."})})},p=function(e){var t=e.heading;return t.length?(0,d.jsx)("thead",{className:"bg-secondary",children:(0,d.jsx)("tr",{children:t.map((function(e){return(0,d.jsx)("th",{className:e.center||"ID"===e.name?"text-center":"",children:e.name},e.name)}))})}):null},f=function(e){var t=e.heading,a=e.data,n=e.loading;return(0,d.jsxs)("table",{className:"table table-hover table-bordered",children:[(0,d.jsx)(p,{heading:t}),(0,d.jsx)(x,{heading:t,data:a,loading:n})]})},j=a(96048),v=a.n(j),b=function(e){var t=e.itemsPerPage,a=e.items,n=e.setItemOffset,r=e.pageCount;return(0,d.jsx)(v(),{nextLabel:"Siguiente",onPageChange:function(e){var r=e.selected*t%a.length;n(r)},pageRangeDisplayed:1,pageCount:r,previousLabel:"Anterior",renderOnZeroPageCount:null,pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakLabel:"...",breakClassName:"page-item",breakLinkClassName:"page-link",containerClassName:"pagination pagination-sm mt-md-0 mt-3 justify-content-center justify-content-md-end",activeClassName:"active"})},y=a(35881),C=a(81173),N=function(e){var t=e.data,a=e.buttonHeader,n=e.loading,s=e.bgHeader,o=e.showPagination,c=void 0===o||o,l=(0,i.useState)(""),u=(0,r.Z)(l,2),g=u[0],h=u[1],x=(0,i.useState)(t),p=(0,r.Z)(x,2),j=p[0],v=p[1],N=(0,i.useState)(0),w=(0,r.Z)(N,2),Z=w[0],k=w[1],I=(0,i.useState)(0),S=(0,r.Z)(I,2),E=S[0],P=S[1];(0,i.useEffect)((function(){var e=E+10,a=function(e){var t=e[0]&&Object.keys(e[0]);return e.filter((function(e){return t.some((function(t){var a,n,r;return(null===(a=e[t])||void 0===a||null===(n=a.toString())||void 0===n||null===(r=n.toLowerCase())||void 0===r?void 0:r.indexOf(g.toLowerCase().trim()))>-1}))}))}(t);v(a.slice(E,e)),k(Math.ceil(a.length/10))}),[E,10,t,g]);var U=(0,i.useMemo)((function(){return(0,d.jsx)(m,{buttonHeader:a,setQ:h,q:g,canSearch:e.canSearch})}),[g,a]);return n&&!t.length?(0,d.jsx)(C.Z,{}):(0,d.jsxs)(y.Z,{bgHeader:s,children:[e.titulo,U,(0,d.jsxs)("div",{className:"table-responsive pb-2",children:[(0,d.jsx)(f,{heading:e.heading,data:j,loading:n}),c?(0,d.jsxs)("div",{className:"d-flex justify-content-md-between text-center justify-content-center flex-md-row flex-column",children:[(0,d.jsxs)("small",{children:["Total registros: ",Object.keys(t).length]}),(0,d.jsx)(b,{pageCount:Z,setItemOffset:P,items:t,itemsPerPage:10})]}):null]})]})}},50852:function(e,t,a){a.r(t),a.d(t,{default:function(){return H}});var n=a(56355),r=a(49677),i=a(74165),s=a(1413),o=a(42982),c=a(15861),l=a(70885),d=a(15597),u=a(21213),m=a(33023),g=a(9085),h=function(e){var t={};return""===e.nombre.trim()&&(t.nombre="El titulo de una categor\xeda es obligatoria."),e.status||(t.status="El estado es obligatorio"),t},x=a(92506),p=a(73054),f=a(72791),j=a(80184),v=function(e){var t=e.label,a=e.initialValue,n=(0,f.useState)(a),r=(0,l.Z)(n,2),i=r[0],s=r[1],o=(0,f.useState)(!1),c=(0,l.Z)(o,2),d=c[0],u=c[1];function m(e){g.Am.error("No has seleccionado una im\xe1gen"),s(null),u(!0)}return{file:i,setFile:s,haveDeleted:d,containerUpload:(0,j.jsxs)("div",{className:"photo ",style:{height:i?"auto":"87.5%"},children:[(0,j.jsx)("label",{htmlFor:"foto",children:t}),(0,j.jsxs)("div",{className:"prevPhoto",children:[(0,j.jsx)("span",{onClick:function(){g.Am.success("Imagen eliminada correctamente."),s(null),u(!0)},className:"delPhoto ".concat(i?"":"d-none"),children:"X"}),(0,j.jsx)("label",{htmlFor:"foto"}),(null===i||void 0===i?void 0:i.img)&&(0,j.jsx)("img",{src:"string"===typeof i.img?i.img:"",alt:"Portada categoria"})]}),(0,j.jsx)("div",{className:"upimg",children:(0,j.jsx)("input",{type:"file",className:"d-none",name:"foto",accept:"image/x-png,image/gif,image/jpeg",onChange:function(e){var t=e.target;if(!t.files.length)return m("No has seleccionado una im\xe1gen");var a=t.files[0];if(!["image/jpeg","image/png","image/jpg"].includes(a.type))return m("S\xf3lo se permiten im\xe1genes");var n=new FileReader;n.readAsDataURL(a),n.onloadend=function(e){var t=n.result;s({img:t,file:a})}},id:"foto"})})]})}},b=a(13293),y=a(11161),C=function(e){var t=(0,y.d)().setShowModal,a=e.categoria,n=e.updateCategoria,r=(0,b.U)().setLoader,s=!!a.portada,o=v({label:"Actualiza la portada de tu categoria",initialValue:s?{img:d.PF+a.portada,file:null}:null}),m=o.file,f=o.haveDeleted,C=o.containerUpload,N={nombre:a.nombre,status:a.status,descripcion:a.descripcion};function w(){return(w=(0,c.Z)((0,i.Z)().mark((function e(s){var o,c,h,x,p,j,v;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c in e.prev=0,r(!0,"Editando categoria..."),o=new FormData,s)Object.hasOwnProperty.call(s,c)&&o.append(c,s[c]);if(o.append("borrarImagen",f?"true":"false"),null===m||void 0===m||!m.file){e.next=12;break}return e.next=8,(0,d.JQ)([m.file]);case 8:h=e.sent,x=(0,l.Z)(h,1),p=x[0],o.append("file",p,p.name);case 12:return j="/categorias/"+a.idcategoria,e.next=15,u.Z.put(j,o,{headers:{"content-type":"multipart/form-data"}});case 15:v=e.sent,g.Am.success(v.data.msg),n(v.data.categoria),t(!1),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),(0,d.S3)(e.t0);case 24:return e.prev=24,r(!1),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[0,21,24,27]])})))).apply(this,arguments)}return(0,j.jsx)(x.J9,{onSubmit:function(e){return w.apply(this,arguments)},initialValues:N,validate:h,children:(0,j.jsxs)(x.l0,{style:{width:"100%"},children:[(0,j.jsxs)("div",{className:"form-row",children:[(0,j.jsxs)("div",{className:"col-lg-6",children:[(0,j.jsx)(p.II,{label:"Nombre Categor\xeda",name:"nombre",placeholder:"Ingresa el nombre de la categor\xeda",required:!0}),(0,j.jsx)(p.gx,{label:"Descripci\xf3n Categor\xeda",placeholder:"Ingrese la descripci\xf3n de la categor\xeda",name:"descripcion",max:150}),(0,j.jsx)(p.Ph,{label:"Estado",name:"status",values:[{label:"Activo",value:1},{label:"Inactivo",value:2}],required:!0})]}),(0,j.jsx)("div",{className:"col-lg-6 mb-5 mb-lg-0",children:C})]}),(0,j.jsx)(p.zx,{text:"Editar Categor\xeda"})]})})},N=function(e){var t=(0,y.d)().setShowModal,a=v({label:"Sube una im\xe1gen relacionada con la categor\xeda"}),n=a.file,r=a.setFile,s=a.containerUpload,o=(0,b.U)().setLoader;function m(){return(m=(0,c.Z)((0,i.Z)().mark((function a(s,c){var m,h,x,p,f,j;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:for(h in a.prev=0,o(!0,"Subiendo categoria..."),m=new FormData,s)Object.hasOwnProperty.call(s,h)&&m.append(h,s[h]);if(null===n||void 0===n||!n.file){a.next=10;break}return a.next=7,(0,d.JQ)([n.file]);case 7:x=a.sent,p=(0,l.Z)(x,1),f=p[0],m.append("file",f,f.name);case 10:return a.next=12,u.Z.post("/categorias",m,{headers:{"content-type":"multipart/form-data"}});case 12:j=a.sent,c.resetForm(),r(null),g.Am.success(j.data.msg),e.addCategoria(j.data.categoria),t(!1),a.next=23;break;case 20:a.prev=20,a.t0=a.catch(0),(0,d.S3)(a.t0);case 23:return a.prev=23,o(!1),a.finish(23);case 26:case"end":return a.stop()}}),a,null,[[0,20,23,26]])})))).apply(this,arguments)}return(0,j.jsx)(x.J9,{onSubmit:function(e,t){return m.apply(this,arguments)},validate:h,initialValues:{nombre:"",status:1,descripcion:""},children:(0,j.jsxs)(x.l0,{style:{width:"100%"},children:[(0,j.jsxs)("div",{className:"form-row",children:[(0,j.jsxs)("div",{className:"col-lg-6",children:[(0,j.jsx)(p.II,{label:"Nombre Categor\xeda",name:"nombre",placeholder:"Ingresa el nombre de la categor\xeda",required:!0}),(0,j.jsx)(p.gx,{label:"Descripci\xf3n Categor\xeda",placeholder:"Ingrese la descripci\xf3n de la categor\xeda",name:"descripcion",max:150}),(0,j.jsx)(p.Ph,{label:"Estado",name:"status",values:[{label:"Activo",value:1},{label:"Inactivo",value:2}],required:!0,placeholder:"Escoja un estado para su categor\xeda"})]}),(0,j.jsx)("div",{className:"col-lg-6 mb-5",children:s})]}),(0,j.jsx)(p.zx,{text:"Crear categoria"})]})})},w=function(e){var t=e.imagenModal;return(0,j.jsx)("div",{className:"text-center",children:(0,j.jsx)("img",{style:{userSelect:"none"},className:"img-fluid",src:t,alt:"Imagen actual"})})},Z=[{name:"ID",dataKey:"idcategoria",center:!0},{name:"Nombre",dataKey:"nombre",center:!0},{name:"Portada",dataKey:"portadaHtml",center:!0},{name:"Total Productos",dataKey:"totalproductosHtml",center:!0},{name:"Estado",dataKey:"statusHtml",center:!0},{name:"Acciones",dataKey:"options",center:!0}],k=a(66273),I=function(e){var t=e.idcategoria,a=e.eliminarCategoria,r=e.setEditarCategoria;return(0,j.jsxs)(k.Z,{children:[(0,j.jsxs)(k.K,{color:"primary",to:"categorias/ver-categoria/".concat(t),children:[(0,j.jsx)(n.dSq,{})," Ver Categor\xeda"]}),(0,j.jsxs)(k.K,{color:"secondary",onClick:function(){return r(t)},children:[(0,j.jsx)(n.tU3,{})," Editar Categor\xeda"]}),(0,j.jsxs)(k.K,{onClick:function(){return a(t)},color:"danger",children:[(0,j.jsx)(n.Xm5,{})," Eliminar Categor\xeda"]})]})},S=a(87087),E=function(e){var t=e.data,a=e.setImagenActualVerModal,n=e.eliminarCategoria,r=e.setEditarCategoria;return t.map((function(e){var t={className:1===e.status?"badge-success":"badge-danger",text:1===e.status?"Activo":"Inactivo"};e.totalproductosHtml=(0,j.jsx)("h6",{children:e.totalproductos?e.totalproductos:"No existen productos asociados a esta categoria"});var i=!e.portada||""===e.portada,s=d.PF+(i?"portada_categoria.png":e.portada);return e.portadaHtml=(0,j.jsx)(S.LazyLoadImage,{alt:"Portada Categoria",style:{width:"150px",cursor:"pointer"},src:s,effect:"blur",onClick:function(){return a(s)}}),e.statusHtml=(0,j.jsx)("span",{className:"badge ".concat(t.className),children:t.text}),e.options=(0,j.jsx)(I,{idcategoria:e.idcategoria,eliminarCategoria:n,setEditarCategoria:r}),e}))},P=a(41297),U=function(e){var t=e.urlRequest,a=(0,b.U)().setLoader,r=(0,y.d)().setModal,g=(0,P.Z)([],{url:t}),h=(0,l.Z)(g,4),x=h[0],p=h[1],f=h[3];function v(){return(v=(0,c.Z)((0,i.Z)().mark((function e(t){var n,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0,"Cargando categor\xeda..."),e.next=3,(0,u.Z)("/categorias/getCategoriaById/".concat(t));case 3:n=e.sent,o=function(e){return f(x.map((function(t){return t.idcategoria===e.idcategoria?(0,s.Z)({totalproductos:t.totalproductos},e):t})))},r({titulo:"Editar Categoria",bgHeader:"secondary",size:"xl",content:(0,j.jsx)(C,{categoria:n.data,updateCategoria:o})}),a(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=(0,c.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,d.mJ)({title:"Est\xe1s seguro de eliminar esta categoria?",text:"No ser\xe1s capz de recuperarlo!",callback:function(){return f(x.filter((function(e){return e.idcategoria!==t})))},urlDelete:"/categorias/".concat(t)});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,j.jsx)(m.Z,{data:E({data:x,setEditarCategoria:function(e){return v.apply(this,arguments)},setImagenActualVerModal:function(e){r({content:(0,j.jsx)(w,{imagenModal:e}),titulo:"",bgHeader:null,size:"xl"})},eliminarCategoria:function(e){return k.apply(this,arguments)}}),heading:Z,loading:p,buttonHeader:(0,j.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:function(){r({titulo:"Crear Categoria",size:"xl",bgHeader:"primary",content:(0,j.jsx)(N,{addCategoria:function(e){return f([e].concat((0,o.Z)(x)))}})})},children:(0,j.jsx)(n.wEH,{})})})},L=a(10449),H=function(){return(0,L.Z)({rolesPermisos:[d.F0],urlReturn:"/home"}),(0,j.jsx)(r.Z,{titulo:"Categor\xedas",Icon:n.YxP,btnBackUrl:"/home",btnBackText:"Ir a Inicio",breadCrumb:[{titulo:"Categor\xedas"}],children:(0,j.jsx)(U,{urlRequest:"/categorias"})})}},41297:function(e,t,a){var n=a(74165),r=a(15861),i=a(70885),s=a(72791),o=a(21213);t.Z=function(e,t){var a=t.url,c=t.onCompleteData,l=t.recieveDataFromCompleteData,d=(0,s.useState)(e),u=(0,i.Z)(d,2),m=u[0],g=u[1],h=(0,s.useState)(!0),x=(0,i.Z)(h,2),p=x[0],f=x[1];function j(){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,o.Z)(a);case 3:t=e.sent,c&&(l&&g(c(t.data)?t.data:c(t.data)),c(t.data)),g(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.prev=11,f(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))).apply(this,arguments)}return(0,s.useEffect)((function(){j()}),[]),[m,p,j,g,f]}},10449:function(e,t,a){var n=a(72791),r=a(16871),i=a(60153);t.Z=function(e){var t,a=e.rolesPermisos,s=e.urlReturn,o=(0,r.s0)(),c=(0,i.E)().usuario;return(0,n.useEffect)((function(){var e;null!==(e=c.rol)&&void 0!==e&&e.idrol&&(a.includes(c.rol.idrol)||o("/admin"+s))}),[null===(t=c.rol)||void 0===t?void 0:t.idrol,o]),{usuario:c}}}}]);
//# sourceMappingURL=457.b55605a0.chunk.js.map