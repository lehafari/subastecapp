"use strict";(self.webpackChunkcliente=self.webpackChunkcliente||[]).push([[546],{17546:function(a,e,t){t.r(e),t.d(e,{default:function(){return B}});var n,r,s=t(56355),o=t(49677),c=t(1413),i=t(74165),u=t(15861),l=t(70885),d=t(72791),p=t(21213),h=t(16856),f=function(a){return[{title:"Art\xedculos",path:"/articulos",Icon:s.nO,colouredIcon:"info",valor:a.totalProductos},{title:"Subastas",path:"/categorias",Icon:s.YxP,colouredIcon:"warning",valor:a.totalSubastas},{title:"Usuarios",path:"/usuarios",Icon:s.Cb3,colouredIcon:"danger",valor:a.totalUsuarios},{title:"Pagos",path:"/pedidos",Icon:h.IDG,colouredIcon:"primary",valor:a.totalPagos}]},m=t(43504),b=t(80184),x=function(a){var e=a.path,t=a.Icon,n=a.colouredIcon,r=a.title,s=a.valor;return(0,b.jsx)("div",{className:"col-xl-3 col-lg-4 col-md-6",children:(0,b.jsx)(m.rU,{to:"/admin"+e,children:(0,b.jsxs)("div",{className:"widget-small ".concat(n," coloured-icon"),children:[(0,b.jsx)(t,{className:"icon"}),(0,b.jsx)("div",{className:"info",children:(0,b.jsxs)("h4",{className:"text-center",children:[r,(0,b.jsx)("br",{}),(0,b.jsx)("b",{children:s})]})})]})})})},v=t(26152),Z=t(69683),g=t(30168),j=t(63463),y=t(59513),S=t.n(y),F=(t(68639),j.ZP.div(n||(n=(0,g.Z)(["\n  display: flex;\n  align-self: center;\n  margin-right: 15px;\n  padding: 0 0 20px 0;\n  justify-content: center;\n"])))),P=(0,j.ZP)(S())(r||(r=(0,g.Z)(["\n  border: 0;\n  padding: 5px 10px;\n  padding-right: 30px;\n  border-radius: 5px;\n  background-color: #64a3b9;\n  color: #fff;\n  transition: background-color 0.3s ease;\n  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;\n\n  &:focus {\n    border: none;\n  }\n"]))),w=t(35881),k=t(15597);v.kL.register(v.qi,v.u,v.De);var D=function(a){var e=a.dataChartPaquetesMesPago,t=a.setDataChartPaquetesMesPago,n=e.year,r=e.mes,s=e.paquetespago,o=d.useState(new Date),c=(0,l.Z)(o,2),h=c[0],f=c[1],m={labels:s?s.map((function(a){return a.cantidad_bids+"Bids"+" (".concat(a.cantidad,")")})):[],datasets:[{data:s?s.map((function(a){return a.total/100})):[],backgroundColor:s?s.map((function(a){return(0,k.mr)()})):[],borderWidth:0}]};function x(){return x=(0,u.Z)((0,i.Z)().mark((function a(e){var n,r,s;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return f(e),n=e.getFullYear(),r=e.getMonth()+1,a.prev=3,a.next=6,p.Z.get("/dashboard/findPaquetesBidPagoMes/".concat(r,"/").concat(n));case 6:s=a.sent,t(s.data),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[3,10]])}))),x.apply(this,arguments)}return(0,b.jsxs)(w.Z,{children:[(0,b.jsxs)("h5",{className:"text-center mb-3",children:["Tipos Pago de: ",n," - ",r]}),(0,b.jsx)(F,{children:(0,b.jsx)("div",{children:(0,b.jsx)(P,{selected:h,onChange:function(a){return x.apply(this,arguments)},dateFormat:"MM/yyyy",showMonthYearPicker:!0,showFullMonthYearPicker:!0,showFourColumnMonthYearPicker:!0,value:h,onKeyDown:function(a){return a.preventDefault()}})})}),(0,b.jsx)("div",{children:s&&s.length?(0,b.jsx)(Z.$I,{data:m,width:300,height:300,options:{maintainAspectRatio:!1,responsive:!0}}):(0,b.jsx)("h6",{className:"text-center",children:"No se encontraron datos"})})]})};v.kL.register(v.uw,v.f$,v.od,v.jn,v.Dx,v.u,v.De);var M=function(a){var e=a.dataLineVentasMes,t=a.setDataLineVentasMes,n=a.label,r=a.subtitle,s=e.year,o=e.mes,c=e.ventas,h=e.total,f=(0,d.useState)(new Date),m=(0,l.Z)(f,2),x=m[0],v=m[1];function g(){return g=(0,u.Z)((0,i.Z)().mark((function a(e){var n,r,s;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return v(e),n=e.getFullYear(),r=e.getMonth()+1,a.prev=3,a.next=6,p.Z.get("/dashboard/findVentasMes/".concat(r,"/").concat(n));case 6:s=a.sent,t(s.data),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[3,10]])}))),g.apply(this,arguments)}return(0,b.jsxs)(w.Z,{children:[(0,b.jsxs)("div",{className:"text-center mb-3",children:[(0,b.jsxs)("h5",{children:[n," ",s," - ",o]}),(0,b.jsxs)("h6",{children:[r," ",h,k.D1]})]}),(0,b.jsx)(F,{children:(0,b.jsx)("div",{children:(0,b.jsx)(P,{selected:x,onChange:function(a){return g.apply(this,arguments)},dateFormat:"MM/yyyy",showMonthYearPicker:!0,showFullMonthYearPicker:!0,showFourColumnMonthYearPicker:!0,value:x,onKeyDown:function(a){return a.preventDefault()}})})}),c&&(0,b.jsx)(Z.x1,{options:{responsive:!0,plugins:{legend:{display:!1}}},data:{labels:c.map((function(a){return a.dia})),datasets:[{label:"Venta",data:c.map((function(a){return a.total?a.total:0})),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"}]}})]})};v.kL.register(v.uw,v.f$,v.ZL,v.Dx,v.u,v.De);var I={responsive:!0,plugins:{legend:{display:!1}}},q=function(a){var e=a.setDataVentasYear,t=a.dataVentasYear,n=t.year,r=t.ventas,s=(0,d.useState)(new Date),o=(0,l.Z)(s,2),c=o[0],h=o[1];function f(){return f=(0,u.Z)((0,i.Z)().mark((function a(t){var n,r,s;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return h(t),n=t.getFullYear(),a.prev=2,r="/dashboard/findVentasYear/".concat(n),a.next=6,p.Z.get(r);case 6:s=a.sent,e(s.data),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[2,10]])}))),f.apply(this,arguments)}return(0,b.jsxs)(w.Z,{children:[(0,b.jsxs)("h5",{className:"text-center mb-3",children:["Ventas del a\xf1o: ",n]}),(0,b.jsx)(F,{children:(0,b.jsx)("div",{children:(0,b.jsx)(P,{selected:c,onChange:function(a){return f.apply(this,arguments)},dateFormat:"yyyy",showYearPicker:!0,value:c,onKeyDown:function(a){return a.preventDefault()}})})}),r&&(0,b.jsx)(Z.$Q,{options:I,data:{labels:k.R5,datasets:[{label:"Venta Mes",data:r.map((function(a){return a.venta})),backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})]})},C=t(81173),Y=t(74498),K=new Date,N=K.getFullYear(),V=K.getMonth()+1,z=function(){var a=(0,d.useState)(0),e=(0,l.Z)(a,2),t=e[0],n=e[1],r=(0,d.useState)(0),s=(0,l.Z)(r,2),o=s[0],h=s[1],m=(0,d.useState)(0),v=(0,l.Z)(m,2),Z=v[0],g=v[1],j=(0,d.useState)(0),y=(0,l.Z)(j,2),S=y[0],F=y[1],P=(0,d.useState)({}),w=(0,l.Z)(P,2),k=w[0],I=w[1],K=(0,d.useState)({}),z=(0,l.Z)(K,2),B=z[0],T=z[1],E=(0,d.useState)({}),L=(0,l.Z)(E,2),A=L[0],H=L[1],U=(0,d.useState)(!0),R=(0,l.Z)(U,2),$=R[0],_=R[1],J=f({totalProductos:t,totalUsuarios:o,totalPagos:Z,totalSubastas:S});return(0,d.useEffect)((function(){function a(){return(a=(0,u.Z)((0,i.Z)().mark((function a(){var e,t,r,s,o,c,u,d,f;return(0,i.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all([(0,p.Z)("/dashboard/getTotalProductos"),(0,p.Z)("/dashboard/getTotalUsuarios"),(0,p.Z)("/dashboard/getTotalPagos"),(0,p.Z)("/dashboard/getTotalSubastas/"),(0,p.Z)("/dashboard/findPaquetesBidPagoMes/".concat(V,"/").concat(N)),(0,p.Z)("/dashboard/findVentasMes/".concat(V,"/").concat(N)),(0,p.Z)("/dashboard/findVentasYear/".concat(N))]);case 2:e=a.sent,t=(0,l.Z)(e,7),r=t[0],s=t[1],o=t[2],c=t[3],u=t[4],d=t[5],f=t[6],n(r.data.total),h(s.data.total),g(o.data.total),F(c.data.total),I(u.data),T(d.data),H(f.data),_(!1);case 19:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[]),$?(0,b.jsx)(C.Z,{}):(0,b.jsxs)(d.Fragment,{children:[(0,b.jsx)("div",{className:"row px-2",children:J.map((function(a){return(0,d.createElement)(x,(0,c.Z)((0,c.Z)({},a),{},{key:a.path}))}))}),(0,b.jsxs)("div",{className:"form-row",children:[(0,b.jsx)("div",{className:"col-lg-6",children:(0,b.jsx)(D,{dataChartPaquetesMesPago:k,setDataChartPaquetesMesPago:I})}),(0,b.jsx)("div",{className:"col-lg-12",children:(0,b.jsx)(Y.Z,{urlRequest:"dashboard/findTopTenSubastasMasPujadas",canSearch:!1,titulo:(0,b.jsx)("h4",{children:"Top 10 subastas m\xe1s pujadas"}),showPagination:!1,heading:[{name:"ID",dataKey:"idsubasta",center:!0},{name:"T\xedtulo",dataKey:"titulo",center:!0},{name:"Fecha Inicio",dataKey:"fechaFinalizacionFormated",center:!0},{name:"Fecha Finalizaci\xf3n",dataKey:"fechaFinalizacionFormated",center:!0},{name:"Total Pujas",dataKey:"totalPujas",center:!0},{name:"Precio Subasta",dataKey:"precioSubastaFormated",center:!0},{name:"Acciones",dataKey:"options",center:!0}]})})]}),(0,b.jsx)(M,{dataLineVentasMes:B,setDataLineVentasMes:T,label:"Ventas Mes:",subtitle:"Total Ventas:"}),(0,b.jsx)(q,{setDataVentasYear:H,dataVentasYear:A})]})},B=function(){return(0,b.jsx)(o.Z,{titulo:"Inicio",Icon:s.xng,descripcion:"Bienvenido a subastec",children:(0,b.jsx)(z,{})})}},74498:function(a,e,t){t.d(e,{Z:function(){return C}});var n=t(74165),r=t(42982),s=t(15861),o=t(70885),c=t(56355),i=t(21213),u=t(15597),l=[{name:"ID",dataKey:"idsubasta"},{name:"Titulo",dataKey:"titulo",center:!0},{name:"Fecha Creaci\xf3n",dataKey:"dateCreatedFormated",center:!0},{name:"Fecha Inicio",dataKey:"fechaInicioFormated",center:!0},{name:"Fecha Finalizaci\xf3n",dataKey:"fechaFinalizacionFormated",center:!0},{name:"Costo Puja",dataKey:"costopuja",center:!0},{name:"Precio minimo",dataKey:"precioText",center:!0},{name:"Precio Subasta",dataKey:"precioSubastaFormated",center:!0},{name:"Acciones",dataKey:"options",center:!0}],d=t(33023),p=t(66273),h=t(80184),f=function(a){var e=a.el,t=a.eliminarSubasta,n=a.editarSubasta,r=e.idsubasta;return(0,h.jsxs)(p.Z,{children:[(0,h.jsxs)(p.K,{color:"info",to:"/admin/subastas/detalle-subasta/".concat(r),children:[(0,h.jsx)(c.DAO,{})," Detalle Subasta"]}),(0,h.jsxs)(p.K,{color:"primary",onClick:function(){return n(r)},children:[(0,h.jsx)(c.tU3,{})," Editar Subasta"]}),(0,h.jsxs)(p.K,{color:"danger",onClick:function(){return t(r)},children:[(0,h.jsx)(c.Xm5,{})," Eliminar Subasta"]})]})},m=t(73528),b=t.n(m),x=function(a){var e=a.data,t=a.eliminarSubasta,n=a.editarSubasta;return e.map((function(a){var e;(a.options=(0,h.jsx)(f,{el:a,eliminarSubasta:t,editarSubasta:n}),a.date_created&&(a.dateCreatedFormated=b()(a.date_created).format("DD/MM/YYYY")),a.fechaInicio&&(a.fechaInicioFormated=b()(a.fechaInicio).format("DD/MM/YYYY HH:mm:ss")),a.fechaFinalizacion&&(a.fechaFinalizacionFormated=b()(a.fechaFinalizacion).format("DD/MM/YYYY HH:mm:ss")),a.preciominimo)&&(a.precioText=(0,u.Mw)(null!==(e=a.preciominimo)&&void 0!==e&&e.toFixed(2)?a.preciominimo.toFixed(2):a.preciominimo)+" "+u.D1);return a.preciosubasta?a.precioSubastaFormated=u.zW.format(a.preciosubasta):a.precioSubastaFormated="0.01 $",a}))},v=t(1413),Z=t(72791),g=t(92506),j=t(69600),y=t(37633),S=t(73054),F=t(53772),P=t(39354),w=t(9085),k=t(11161),D=function(a){var e=a.addSubasta,t=a.productos,r=a.paqueteBids,c=(0,k.d)().cerrarModal,l=(0,Z.useState)(null),d=(0,o.Z)(l,2),p=d[0],f=d[1],m=(0,Z.useState)(null),b=(0,o.Z)(m,2),x=b[0],D=b[1],M=(0,Z.useState)(""),I=(0,o.Z)(M,2),q=I[0],C=I[1],Y=(0,P.Z)({arrValues:[{label:"Producto",name:"producto"},{label:"Paquete Bid",name:"paqueteBid"}]}),K=Y.Tabset,N=Y.selectedTab,V={titulo:"",productoid:null,paqueteBidId:null,costopuja:1,preciominimo:"",fechaInicio:u.I9,fechaFinalizacion:u.I9};function z(){return(z=(0,s.Z)((0,n.Z)().mark((function a(t){var r,s;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.fechaInicio>=t.fechaFinalizacion)){a.next=2;break}return a.abrupt("return",w.Am.error("Fecha actual no puede ser mayor que la finalizacion"));case 2:if(!p){a.next=5;break}if(q){a.next=5;break}return a.abrupt("return",w.Am.error("Por favor, elige una foto"));case 5:return a.prev=5,a.next=8,i.Z.post("/subastas",(0,v.Z)((0,v.Z)({},t),{},{fotoSubasta:q}));case 8:r=a.sent,s=r.data,w.Am.success(s.msg),f(null),D(null),e(s.subasta),c(),a.next=20;break;case 17:a.prev=17,a.t0=a.catch(5),(0,u.S3)(a.t0);case 20:case"end":return a.stop()}}),a,null,[[5,17]])})))).apply(this,arguments)}var B="producto"===N;function T(a){B?f(a):D(a),C(null)}var E="producto"===N?t.map((function(a){return{label:a.nombre,value:a.idproducto}})):r.map((function(a){return{label:a.cantidadBids+" Bids",value:a.idpaquete}}));return(0,h.jsx)(g.J9,{validate:j.Z,initialValues:V,onSubmit:function(a){return z.apply(this,arguments)},children:function(a){var e=a.setFieldValue;return(0,h.jsxs)(g.l0,{children:[(0,h.jsx)(K,{onChange:function(a){return function(a,e){a!==N&&("producto"===a&&(D(null),e("paqueteBid",null)),"paqueteBid"===a&&(f(null),e("productoid",null)),C(null))}(a,e)}}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"col-lg-6",children:[y.Z.map((function(a){return(0,Z.createElement)(S.II,(0,v.Z)((0,v.Z)({},a),{},{key:a.name}))})),(0,h.jsx)(S.xZ,{name:"fechaInicio",label:"Fecha Inicio",required:!0}),(0,h.jsx)(S.xZ,{name:"fechaFinalizacion",label:"Fecha Finalizacion",required:!0}),(0,h.jsx)(S.Ph,{label:B?"Elija un producto":"Elija un paquete de Bids",required:!0,values:E,name:B?"productoid":"paqueteBidId",busquedaInput:!0,onChange:T}),(0,h.jsx)(S.zx,{text:"Crear Subasta"})]}),(0,h.jsx)("div",{className:"col-lg-6",children:(0,h.jsx)(F.Z,{productoSeleccionado:p,paqueteBidSeleccionado:x,paqueteBids:r,productos:t,setFotoSubasta:C,fotoSubasta:q})})]})]})}})},M=t(63812),I=t(13293),q=t(41297),C=function(a){var e=(0,I.U)().setLoader,t=(0,k.d)().setModal,p=(0,q.Z)([],{url:a.urlRequest}),f=(0,o.Z)(p,4),m=f[0],b=f[1],v=f[3],Z=function(){var a=(0,s.Z)((0,n.Z)().mark((function a(){var s,c,u,l,d;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e(!0,"Cargando..."),a.next=3,Promise.all([(0,i.Z)("productos/selectProductosIdName"),(0,i.Z)("paquete-bids")]);case 3:s=a.sent,c=(0,o.Z)(s,2),u=c[0],l=c[1],d=function(a){return v([a].concat((0,r.Z)(m)))},t({titulo:"Crear Subasta",bgHeader:"primary",size:"xl",content:(0,h.jsx)(D,{addSubasta:d,productos:u.data,paqueteBids:l.data})}),e(!1);case 10:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();function g(){return(g=(0,s.Z)((0,n.Z)().mark((function a(r){var s,c,l,d,p,f;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e(!0,"Cargando subasta..."),a.next=4,Promise.all([(0,i.Z)("productos/selectProductosIdName"),(0,i.Z)("paquete-bids"),(0,i.Z)("/subastas/".concat(r))]);case 4:s=a.sent,c=(0,o.Z)(s,3),l=c[0],d=c[1],p=c[2],f=function(a){return v(m.map((function(e){return e.idsubasta===a.idsubasta?a:e})))},t({titulo:"Editar Subasta",bgHeader:"secondary",size:"xl",content:(0,h.jsx)(M.Z,{subasta:p.data,setSubasta:f,productos:l.data,paqueteBids:d.data})}),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(0),(0,u.S3)(a.t0);case 16:return a.prev=16,e(!1),a.finish(16);case 19:case"end":return a.stop()}}),a,null,[[0,13,16,19]])})))).apply(this,arguments)}return(0,h.jsx)(d.Z,{data:x({data:m,eliminarSubasta:function(a){(0,u.mJ)({title:"Eliminar subasta",text:"No ser\xe1s capz de recuperarlo!",urlDelete:"subastas/".concat(a),callback:function(){v(m.filter((function(e){return e.idsubasta!==a})))}})},editarSubasta:function(a){return g.apply(this,arguments)}}),heading:a.heading||l,loading:b,titulo:a.titulo,canSearch:a.canSearch,showPagination:a.showPagination,buttonHeader:"/subastas"===a.urlRequest?(0,h.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:Z,children:(0,h.jsx)(c.wEH,{})}):null})}},41297:function(a,e,t){var n=t(74165),r=t(15861),s=t(70885),o=t(72791),c=t(21213);e.Z=function(a,e){var t=e.url,i=e.onCompleteData,u=e.recieveDataFromCompleteData,l=(0,o.useState)(a),d=(0,s.Z)(l,2),p=d[0],h=d[1],f=(0,o.useState)(!0),m=(0,s.Z)(f,2),b=m[0],x=m[1];function v(){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)((0,n.Z)().mark((function a(){var e;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,c.Z)(t);case 3:e=a.sent,i&&(u&&h(i(e.data)?e.data:i(e.data)),i(e.data)),h(e.data),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:return a.prev=11,x(!1),a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[0,8,11,14]])})))).apply(this,arguments)}return(0,o.useEffect)((function(){v()}),[]),[p,b,v,h,x]}}}]);
//# sourceMappingURL=546.c82d1288.chunk.js.map